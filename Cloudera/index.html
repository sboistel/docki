<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="BOISTEL Samuel" /><link rel="canonical" href="https://sboistel.github.io/docki/Cloudera/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Cloudera - Dockimentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Cloudera";
        var mkdocs_page_input_path = "Cloudera.md";
        var mkdocs_page_url = "/docki/Cloudera/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Dockimentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome to the docki wiki!</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../linux/linux/">Linux</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Windows</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Windows/">Windows</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Windows-Terminal/">Windows Terminal</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../wsl/">WSL</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">MacOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../MacOS/">MacOS keyboard shortcuts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../iterm2/">iTerm2</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Code & DevOPS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Perl/">Perl</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Python/">Python</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Ansible_Engine/">Ansible Engine</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Docker/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ELastiK/">Elasticsearch / Logstash / Kibana</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Terraform/">Terraform</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Kubernetes/">Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Git/">Git</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tools</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Centreon_Central/">Centreon Central</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Nagios/">Nagios</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Netbox/">IPAM - Netbox</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Rhel_idM/">Red Hat Identity Management (IdM)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../FreeIPA/">Free IPA</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Guacamole/">Guacamole</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../UI-path/">UI-path</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../VNC_Tiger/">VNC Tiger</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../OpenVPN/">OpenVPN</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Ngrok/">ngrok</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../vscode/">VSCode</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Web & Networking</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../CertManager/">Cert-Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mkcert/">Certificate Generator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SSL/">SSL Certificates</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../http-status/">HTTP Status Codes</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Cloud & Hypervisor</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../Cloud_Infrastructure/">Cloud Infrastructure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Amazon_Web_Services/">Amazon Web Services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Azure_Cloud/">Microsoft Azure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Google_Cloud_Platforme/">Google Cloud Platforme</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Oracle_Cloud_Infrastructure/">Oracle Cloud Infrastructure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../VMware/">VMware</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Proxmox-VE/">Proxmox-VE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../QEMU-KVM/">QEMU-KVM</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Storage & BDD & BigData</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../Bareos/">Bareos</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Cloudera</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#how-to-identify-if-numa-is-enabled">How to identify if NUMA is enabled</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#numa-enabled-systems">NUMA Enabled Systems</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#numa-disabled-systems">NUMA Disabled Systems</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-if-numa-is-disabled-on-bios-then-the-command-numactl-show-does-not-show-multiple-nodes">1. If NUMA is disabled on BIOS, then the command ‘numactl –show‘ does not show multiple nodes.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-the-command-numactl-hardware-also-does-not-list-multiple-nodes">2. The command ‘numactl –hardware‘ also does not list multiple nodes.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-if-the-server-does-not-have-numa-support-or-if-the-bios-option-is-not-enabled-then-the-following-messages-will-be-seen-in-dmesg">3. If the server does not have NUMA support or if the BIOS option is not enabled, then the following messages will be seen in dmesg</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-if-acpi-is-disabled-that-will-also-disable-numa-verify-that-acpi-is-not-disabled-by-a-grubconf-kernel-parameter-and-remove-it-if-found">4. If ACPI is disabled, that will also disable NUMA; verify that ACPI is not disabled by a grub.conf kernel parameter and remove it if found:</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#charts-building">Charts Building</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#health">Health</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#history">History</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#system">System</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cpu">CPU</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#ram">RAM</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#user-repository">User Repository</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Hadoop/">Hadoop</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Oracle/">Oracle</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MySQL/">MySQL</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../DB2/">IBM DB2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MariaDB/">MariaDB</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Miscellaneous</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../color-codes/">256 Color Codes Cheat-Sheet</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Markdown/">Markdown</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Dockimentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Storage & BDD & BigData &raquo;</li>
      <li>Cloudera</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/sboistel/docki/edit/master/docs/Cloudera.md">Edit on docki</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="cloudera">Cloudera</h1>
<h2 id="how-to-identify-if-numa-is-enabled">How to identify if NUMA is enabled</h2>
<p>NUMA has to enabled in the BIOS. If dmesg does not have records of numa initialization during bootup, then it is possible that NUMA related messages in the kernel ring buffer might have been overwritten.</p>
<h2 id="numa-enabled-systems">NUMA Enabled Systems</h2>
<p>If NUMA is enabled on BIOS, then execute the command ‘numactl –hardware‘ to list inventory of available nodes on the system. Below is example output of numactl –hardware on a system which has NUMA.</p>
<blockquote>
<p>numactl --hardware</p>
</blockquote>
<pre><code class="language-bash">available: 2 nodes (0-1)
node 0 cpus: 0 1 2 3 4 5 6 7 16 17 18 19 20 21 22 23
node 0 size: 8157 MB
node 0 free: 88 MB
node 1 cpus: 8 9 10 11 12 13 14 15 24 25 26 27 28 29 30 31
node 1 size: 8191 MB
node 1 free: 5176 MB
node distances:
node   0   1 
  0:  10  20 
  1:  20  10
</code></pre>
<h2 id="numa-disabled-systems">NUMA Disabled Systems</h2>
<h3 id="1-if-numa-is-disabled-on-bios-then-the-command-numactl-show-does-not-show-multiple-nodes">1. If NUMA is disabled on BIOS, then the command ‘numactl –show‘ does not show multiple nodes.</h3>
<blockquote>
<p>numactl --show</p>
</blockquote>
<pre><code class="language-bash">policy: default
preferred node: current
physcpubind: 0 1 2 3 4 5 6 7 8 9 10 11
cpubind: 0
nodebind: 0
membind: 0
</code></pre>
<h3 id="2-the-command-numactl-hardware-also-does-not-list-multiple-nodes">2. The command ‘numactl –hardware‘ also does not list multiple nodes.</h3>
<pre><code class="language-bash">available: 1 nodes (0)
node 0 cpus: 0 1 2 3 4 5 6 7 8 9 10 11
node 0 size: 65525 MB
node 0 free: 17419 MB
node distances:
node   0
  0:  10
</code></pre>
<h3 id="3-if-the-server-does-not-have-numa-support-or-if-the-bios-option-is-not-enabled-then-the-following-messages-will-be-seen-in-dmesg">3. If the server does not have NUMA support or if the BIOS option is not enabled, then the following messages will be seen in dmesg</h3>
<pre><code class="language-bash">No NUMA configuration found
Faking a node at 0000000000000000-0000001027fff000
</code></pre>
<h3 id="4-if-acpi-is-disabled-that-will-also-disable-numa-verify-that-acpi-is-not-disabled-by-a-grubconf-kernel-parameter-and-remove-it-if-found">4. If ACPI is disabled, that will also disable NUMA; verify that ACPI is not disabled by a grub.conf kernel parameter and remove it if found:</h3>
<pre><code class="language-bash">$ grep acpi=off /proc/cmdline
</code></pre>
<h2 id="charts-building">Charts Building</h2>
<h3 id="health">Health</h3>
<pre><code class="language-SQL">select health_good_rate * 100 as &quot;good health&quot;, health_concerning_rate * 100 as &quot;concerning health&quot;, health_bad_rate * 100 as &quot;bad health&quot;, health_disabled_rate * 100 as &quot;disabled health&quot;, health_unknown_rate * 100 as &quot;unknown health&quot; where entityName=&quot;hdfs:$node-ha&quot;
</code></pre>
<pre><code class="language-sql">select health_good_rate * 100 as &quot;good health&quot; where entityName=&quot;hdfs:$node-ha&quot;
</code></pre>
<h3 id="history">History</h3>
<pre><code class="language-SQL">select dfs_capacity as &quot;HDFS&quot;,(dfs_capacity_used+dfs_capacity_used_non_hdfs) as &quot;Used&quot; where entityName=&quot;hdfs:$node-ha&quot;
</code></pre>
<h2 id="system">System</h2>
<h3 id="cpu">CPU</h3>
<pre><code class="language-sql">select cpu_user_rate / getHostFact(numCores, 1) * 100, cpu_system_rate / getHostFact(numCores, 1) * 100, cpu_nice_rate / getHostFact(numCores, 1) * 100, cpu_iowait_rate / getHostFact(numCores, 1) * 100, cpu_irq_rate / getHostFact(numCores, 1) * 100, cpu_soft_irq_rate / getHostFact(numCores, 1) * 100, cpu_steal_rate / getHostFact(numCores, 1) * 100 
</code></pre>
<h3 id="ram">RAM</h3>
<pre><code class="language-sql">select swap_used, physical_memory_used, physical_memory_total WHERE hostname RLIKE &quot;.*data.*&quot;
</code></pre>
<h2 id="user-repository">User Repository</h2>
<p>List user home directories :</p>
<pre><code class="language-bash">hdfs dfs -ls /user/
</code></pre>
<p>Get user home directory acl as example :</p>
<pre><code class="language-bash">hdfs dfs -getfacl /user/JohnDoe
</code></pre>
<p>cf <a href="../Hadoop/">Hadoop cheat-sheet</a></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../Bareos/" class="btn btn-neutral float-left" title="Bareos"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Hadoop/" class="btn btn-neutral float-right" title="Hadoop">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2022 sboistel</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../Bareos/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Hadoop/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
