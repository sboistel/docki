{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the docki wiki! Welcome to the docki Github page What do U mean about knowledge transfert ? Let's having fun, and #RTFM ! U should select find U'r plaisir into the nav bar on the left Don't forget, U should add the search section as your search engine","title":"Home"},{"location":"#welcome-to-the-docki-wiki","text":"Welcome to the docki Github page What do U mean about knowledge transfert ? Let's having fun, and #RTFM ! U should select find U'r plaisir into the nav bar on the left Don't forget, U should add the search section as your search engine","title":"Welcome to the docki wiki!"},{"location":"about/","text":"About This repository is hosted on GitHub : https://github.com/sboistel/docki Author \ud83d\udc64 Wrote by sboistel","title":"About"},{"location":"about/#about","text":"This repository is hosted on GitHub : https://github.com/sboistel/docki","title":"About"},{"location":"about/#author","text":"\ud83d\udc64 Wrote by sboistel","title":"Author"},{"location":"application/guacamole/","text":"Guacamole Apache Guacamole is a clientless remote desktop gateway. It supports standard protocols like VNC, RDP, and SSH. We call it clientless because no plugins or client software are required. Thanks to HTML5, once Guacamole is installed on a server, all you need to access your desktops is a web browser . Server Requiere depedences APT:DEB/Ubuntu apt install libcairo2-dev libtool-bin libossp-uuid-dev Optional depedences APT:DEB/Ubuntu apt install libavcodec-dev libavformat-dev libavutil-dev libswscale-dev freerdp2-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libwebsockets-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev Obtain code APT:DEB/Ubuntu apt install git Donwload the guacamole server repository: git clone git://github.com/apache/guacamole-server.git Build process cd guacamole-server autoreconf -fi ./configure --with-init-dir=/etc/init.d --enable-allow-freerdp-snapshots make Installation make install ldconfig Guest agent Requierement APT:DEB/Ubuntu apt install git maven RPM:Fedora/Centos/Rhel: yum install git maven Donwload the guacamole client repository git clone git://github.com/apache/guacamole-client.git mvn package","title":"Guacamole"},{"location":"application/guacamole/#guacamole","text":"Apache Guacamole is a clientless remote desktop gateway. It supports standard protocols like VNC, RDP, and SSH. We call it clientless because no plugins or client software are required. Thanks to HTML5, once Guacamole is installed on a server, all you need to access your desktops is a web browser .","title":"Guacamole"},{"location":"application/guacamole/#server","text":"","title":"Server"},{"location":"application/guacamole/#requiere-depedences","text":"APT:DEB/Ubuntu apt install libcairo2-dev libtool-bin libossp-uuid-dev","title":"Requiere depedences"},{"location":"application/guacamole/#optional-depedences","text":"APT:DEB/Ubuntu apt install libavcodec-dev libavformat-dev libavutil-dev libswscale-dev freerdp2-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libwebsockets-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev","title":"Optional depedences"},{"location":"application/guacamole/#obtain-code","text":"APT:DEB/Ubuntu apt install git Donwload the guacamole server repository: git clone git://github.com/apache/guacamole-server.git","title":"Obtain code"},{"location":"application/guacamole/#build-process","text":"cd guacamole-server autoreconf -fi ./configure --with-init-dir=/etc/init.d --enable-allow-freerdp-snapshots make","title":"Build process"},{"location":"application/guacamole/#installation","text":"make install ldconfig","title":"Installation"},{"location":"application/guacamole/#guest-agent","text":"","title":"Guest agent"},{"location":"application/guacamole/#requierement","text":"APT:DEB/Ubuntu apt install git maven RPM:Fedora/Centos/Rhel: yum install git maven Donwload the guacamole client repository git clone git://github.com/apache/guacamole-client.git mvn package","title":"Requierement"},{"location":"application/openvpn/","text":"OpenVPN Install via repository (recommended) * LINK The recommended method to install the OpenVPN Access Server is to use the official OpenVPN Access Server software repository. You will need to be logged on to your Linux system either on the console or via SSH, and have root privileges. Then copy and paste the commands below to add the repository to your system, and install the OpenVPN Access Server client bundle and the OpenVPN Access Server package itself. Installing the package 'openvpn-as' will automatically pull in the required client bundle as well. apt update apt -y install ca-certificates wget net-tools gnupg wget -qO - https://as-repository.openvpn.net/as-repo-public.gpg | apt-key add - echo deb http://as-repository.openvpn.net/as/debian buster main /etc/apt/sources.list.d/openvpn-as-repo.list apt update apt -y install openvpn-as Configuration Follow theses steps : OpenVPN Website","title":"OpenVPN"},{"location":"application/openvpn/#openvpn","text":"","title":"OpenVPN"},{"location":"application/openvpn/#install-via-repository","text":"(recommended) * LINK The recommended method to install the OpenVPN Access Server is to use the official OpenVPN Access Server software repository. You will need to be logged on to your Linux system either on the console or via SSH, and have root privileges. Then copy and paste the commands below to add the repository to your system, and install the OpenVPN Access Server client bundle and the OpenVPN Access Server package itself. Installing the package 'openvpn-as' will automatically pull in the required client bundle as well. apt update apt -y install ca-certificates wget net-tools gnupg wget -qO - https://as-repository.openvpn.net/as-repo-public.gpg | apt-key add - echo deb http://as-repository.openvpn.net/as/debian buster main /etc/apt/sources.list.d/openvpn-as-repo.list apt update apt -y install openvpn-as","title":"Install via repository"},{"location":"application/openvpn/#configuration","text":"Follow theses steps : OpenVPN Website","title":"Configuration"},{"location":"bdd/Mysql/","text":"Mysql Here are somes SQL tips tricks Format Pager Set page print as infinit : pager less -SFIX;","title":"Mysql"},{"location":"bdd/Mysql/#mysql","text":"Here are somes SQL tips tricks","title":"Mysql"},{"location":"bdd/Mysql/#format","text":"","title":"Format"},{"location":"bdd/Mysql/#pager","text":"Set page print as infinit : pager less -SFIX;","title":"Pager"},{"location":"bdd/Oracle/","text":"Oracle Here are somes Oracle tips tricks Spfile SPFILE (Fichier de param\u00e8tres persistant) est un fichier binaire recherch\u00e9 automatiquement au d\u00e9marrage de l\u2019instance. Son nom par d\u00e9faut est spfile .ora. Il est situ\u00e9 dans $ORACLE_HOME/dbs/. Le fichier SPFILE est recommand\u00e9 par Oracle en raison de la possibilit\u00e9 de g\u00e9r\u00e9 dynamiquement de nombreux param\u00e8tres d\u2019initialisation. Il est modifi\u00e9 par le moteur Oracle. PFILE (Fichier de param\u00e8tres statique) est un fichier texte recherch\u00e9 automatiquement au d\u00e9marrage de l\u2019instance en l\u2019absence du fichier SPFILE. Il est modifi\u00e9 manuellement par le DBA. Son nom par d\u00e9faut est : init .ora et il est situ\u00e9 dans $ORACLE_HOME/dbs. Les modifications prennent effet qu\u2019apr\u00e8s le red\u00e9marrage de l\u2019instance. CR\u00c9ER UN SPFILE A PARTIR D\u2019UN PFILE Vous pouvez cr\u00e9er un fichier SPFILE \u00e0 partir d\u2019un fichier PFILE via la commande suivante (instance d\u00e9marr\u00e9e ou non) et ou le nom d\u2019instance est DBA01 : CREATE SPFILE = \u2018$ORACLE_HOME/dbs/spfileDBA01.ora\u2019 FROM PFILE = \u2018$ORACLE_HOME/dbs/initDBA01.ora\u2018 Control file Le fichier de contr\u00f4le est un fichier binaire, il contient des informations sur la structure physique de la base. Il est cr\u00e9\u00e9 pendant la cr\u00e9ation de la base et il est modifi\u00e9 en permanence. Ce fichier doit \u00eatre toujours disponible car il est consult\u00e9; et modifi\u00e9 fr\u00e9quemment par le serveur oracle. Et il est indispensable pour la restauration de la base. Pour afficher les noms des fichiers de contr\u00f4le on utilise : SHOW PARAMETER CONTROL_FILES SELECT VALUE FROM V$PARAMETER WHERE NAME='control_files'; Redolog Les fichiers Redo Logs servent \u00e0 enregistrer toutes les modifications commit\u00e9es effectu\u00e9es sur le base de donn\u00e9es. Ils servent \u00e0 prot\u00e9ger la base de donn\u00e9es dans le cas d\u2019un \u00e9chec d\u2019instance. En cas de restauration de la base de donn\u00e9es, on utilise les redo logs pour \u2018rejouer\u2019 les modifications qui ont eu lieu, les transactions valid\u00e9es (commit \u00e0 la fin de la transaction) sont enregistr\u00e9es dans les fichiers de donn\u00e9es Oracle et les transactions non valid\u00e9es, s\u2019il y en a, sont effac\u00e9es des fichiers de donn\u00e9es. Data base file Les fichiers physiques d\u2019une base Oracle permettent de stocker de mani\u00e8re persistante les donn\u00e9es manipul\u00e9es par Oracle. Archive log Quand la base est en mode NOARCHIVELOG, l\u2019archivage des fichiers redo est d\u00e9sactiv\u00e9. Le fichier de contr\u00f4le indique que les groupes des fichiers redo pleins ne sont plus n\u00e9cessaires. D\u00e8s qu\u2019ils sont inactifs apr\u00e8s un log switch, le groupe sera disponible pour une r\u00e9utilisation par la LGWR . \u2192 (lgwr \u00e9crit toutes les entr\u00e9es refaites qui ont \u00e9t\u00e9 copi\u00e9es dans le tampon depuis la derni\u00e8re fois.) Le mode NOARCHIVELOG prot\u00e8ge la base contre une d\u00e9faillance d\u2019instance et non pas contre une d\u00e9faillance media. Seulement les modifications r\u00e9centes dans la base, stock\u00e9s dans les groupes de fichiers redo en ligne seront disponibles pour la restauration de la base. En mode NOARCHIVELOG, on ne peut pas sauvegarder en ligne une tablespace. Pour restaurer une base en mode NOARCHIVELOG, on est oblig\u00e9 de faire une sauvegarde compl\u00e8te quand la base est ferm\u00e9e. Quand la base est en mode ARCHIVELOG, l\u2019archivage des fichiers redo est activ\u00e9. Le fichier de contr\u00f4le de la base signale que les groupes contenant des fichiers redo pleins ne peuvent pas \u00eatre utilis\u00e9s par le process LGWR tant que les groupes n\u2019ont pas \u00e9t\u00e9 archiv\u00e9s. V\u00e9rifier s\u2019il y a pr\u00e9sence d\u2019Archive log : archive log list Conna\u00eetre la destination de chacune d\u2019entre-elles : show parameter log_archive_dest Passer en mode d'archivage (//attention \u00e0 ne pas omettre de monter seulement l'instance afin d'effectuer la manipulation. Celle-ci subira donc une relance //) : ALTER DATABASE ARCHIVELOG; Informations Conna\u00eetre les informations et version de composant oracle : odacli describe-component Conna\u00eetre le nom de la base sur laquelle on est connect\u00e9e : show parameter name Ou encore pour soucis de suret\u00e9 : show parameter unique Conna\u00eetre le owner d\u2019une table : select disctinct owner from all_tables; Savoir si la base tourne ou non en SQL : SELECT INSTANCE_NAME, STATUS, DATABASE_STATUS FROM V$INSTANCE; Diag Tunning Name Interpr\u00e9ter Syntaxe : CONTROL_MANAGEMENT_PACK_ACCESS = { NONE | DIAGNOSTIC | DIAGNOSTIC+TUNING} D\u00e9sactiver Passon la m\u00e9moire tampon mais aussi le spfile \u00e0 none En tant que sysdba : ALTER SYSTEM SET CONTROL_MANAGEMENT_PACK_ACCESS=NONE SCOPE=BOTH; Check V\u00e9rifier s\u2019il est activ\u00e9 : show parameter control_management_pack_access Ou encore : select display_value from v$parameter where name = 'control_management_pack_access'; Bring impdp R\u00e9ccup\u00e9rer la vue sur un import en bacground : impdp \\ / as sysdba\\ ATTACH= SYS_IMPORT_FULL_01 Global Prefs Get Global prefs : SELECT DBMS_STATS.get_prefs('CONCURRENT') FROM dual; Global Perfs State SQL Command True DBMS_STATS.SET_GLOBAL_PREFS('CONCURRENT','TRUE'); False DBMS_STATS.SET_GLOBAL_PREFS('CONCURRENT','FALSE'); LSNRCTL L\u2019utilitaire de contr\u00f4le d\u2019\u00e9coute vous permet d\u2019administrer des listeners. Vous pouvez utiliser ses commandes pour ex\u00e9cuter des fonctions de gestion de base sur un ou plusieurs listeners. En outre, vous pouvez afficher et modifier les param\u00e8tres. Commandes possible : - start - Stop - Status - Services - Servacls - Version - Reload - save_config - Trace - Spawn - Quit - Exit - set - show Effectuer un status du service listener : Il se peut que celuic-ci ne se nomme pas LISTENER, il s\u2019agit des param\u00e8tres pas d\u00e9faut : lsnrctl status LISTENER ODACLI R\u00e9pertorier toutes les bases de donn\u00e9es de l\u2019appliance : odacli list-databases Afficher les d\u00e9tails de la base de donn\u00e9es : odacli describe-database Cr\u00e9er une nouvelle base de donn\u00e9es : odacli create-database Supprimer une base de donn\u00e9es : odacli delete-database R\u00e9seau : - On trouvera les identifiants r\u00e9seau : odacli list-network On y trouve tout les d\u00e9tails de ce r\u00e9seau : :: odacli describe-ntwork -i $identifiants_r\u00e9seau OSWBBA java -jar /opt/oracle/oak/oswbb/oswbba.jar -i /opt/oracle/oak/oswbb/archive -b Mar 18 00:00:00 2019 -e Mar 19 00:00:00 Ressources Afin de v\u00e9rifier l\u2019\u00e9tat du param\u00e8tre SESSIONS : SHOW parameter sessions Processes PROCESSES sp\u00e9cifie le nombre maximal de processus utilisateur du syst\u00e8me d\u2019exploitation pouvant se connecter simultan\u00e9ment \u00e0 Oracle. Sa valeur doit autoriser tous les processus d\u2019arri\u00e8re-plan tels que les verrous, les processus de file d\u2019attente de travaux et les processus d\u2019ex\u00e9cution parall\u00e8les. Les valeurs par d\u00e9faut des param\u00e8tres SESSIONS et TRANSACTIONS sont d\u00e9riv\u00e9es de ce param\u00e8tre. Par cons\u00e9quent, si vous modifiez la valeur de PROCESSES, vous devez d\u00e9terminer si vous souhaitez ajuster les valeurs de ces param\u00e8tres d\u00e9riv\u00e9s. Afin de v\u00e9rifier l\u2019\u00e9tat du param\u00e8tre PROCESSES : SHOW parameter processes Application du param\u00e8tre : ALTER SYSTEM SET processes=[VALUE AS INTEGER] SCOPE=SPFILE ; Transactions TRANSACTIONS sp\u00e9cifie le nombre maximal de transactions simultan\u00e9es. Des valeurs plus \u00e9lev\u00e9es augmentent la taille du SGA et peuvent augmenter le nombre de segments de restauration allou\u00e9s. La valeur par d\u00e9faut est sup\u00e9rieure \u00e0 SESSIONS (et \u00e0 son tour, PROCESSES) pour permettre les transactions r\u00e9cursives. V\u00e9rifier les param\u00e8tres Afin de v\u00e9rifier l\u2019\u00e9tat du param\u00e8tre TRANSACTIONS : SHOW parameter transactions Application du param\u00e8tre : ALTER SYSTEM SET transactions=[VALUE AS INTEGER] SCOPE=SPFILE ; :warning: Application des param\u00e8tres : Afin d\u2019appliquer des param\u00e8tres modifi\u00e9s dans le spfile , un relance de l\u2019instance sera requis : shutdown immediate startup Account D\u00e9bloquer des compte v\u00e9rouill\u00e9 : SQL conn / AS sysdba Connected. SQL ALTER USER $USER BY ******** account UNLOCK; USER altered. SQL ALTER USER $USER IDENTIFIED BY ******** account UNLOCK; USER altered. SQLPLUS Param\u00e9trage de l\u2019interface sqlplus : linesize La longueur des lignes par d\u00e9faut 80 caract\u00e8res : set linesize 200 col Il d\u00e9fini un format de sortie pour une colonne particuli\u00e8re : col table_name for a20 set pause on Permet une attente de RETURN pour faire d\u00e9filer les lignes suivantes ( comme la commande more). spool La sortie standard et d\u2019erreur est redirig\u00e9e dans le fichier indiqu\u00e9 dans la commande. La commande \u201cspool off\u201d ferme le fichier. Utiliser la commande SQL **start** or **@** pour effectuer les script tel que .sql STATSPACK Analyser Mise en forme du resultat : col OWNER format a10 col SEGMENT_NAME format a60 col SEGMENT_TYPE format a15 set pagesize 1000 select owner,segment_name,segment_type,bytes/1024/1024 fromdba_segments where tablespace_name = 'STATSPACK_TBS' andsegment_type = 'TABLE' order by bytes desc; Corriger 1. Purge STATSPACK Renseigner la plage d'id \u00e0 purger : DEFINE losnapid=1 -- low snap id DEFINE hisnapid=2 -- high snap id @?/rdbms/admin/sppurge.sql 2. Move table How to move dba_segments : select 'alter table '||owner||'.'||segment_name||' move;' from dba_segments where tablespace_name = 'STATSPACK_TBS' and segment_type = 'TABLE' order by bytes desc; 3. Rebuild Index How to rebuild dba_indexes : select 'alter index '||owner||'.'||index_name||' rebuild;' from dba_indexes where status = 'UNUSABLE'; TNSNAME Comment la v\u00e9rifier : [oracle@oda ~]# env | grep TNS TNS_ADMIN=/backup/TNS Le fichier est donc dans /backup/TNS/tnsname.ora . Configuration: Voici un exemple de configuration : (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = ''iP de la machine'')(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ''Nom de la base'') ) ) Tablespace Know the tablesapces size : set line 1000 set pagesize 100 col Tablespace FOR a22 col Used MB FOR 99,999,999 col Free MB FOR 99,999,999 col Total MB FOR 99,999,999 SELECT df.tablespace_name Tablespace , totalusedspace Used MB , (df.totalspace - tu.totalusedspace) Free MB , df.totalspace Total MB , round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace)) Pct. Free , df.MAX_SIZE/1024/1024/1024 Max Size Go FROM (SELECT tablespace_name, round(SUM(bytes) / 1048576) TotalSpace, sum(decode(AUTOEXTENSIBLE, 'YES', MAXBYTES, BYTES)) MAX_SIZE FROM dba_data_files GROUP BY tablespace_name) df, (SELECT round(SUM(bytes)/(1024*1024)) totalusedspace, tablespace_name FROM dba_segments GROUP BY tablespace_name) tu WHERE df.tablespace_name = tu.tablespace_name;","title":"Oracle"},{"location":"bdd/Oracle/#oracle","text":"Here are somes Oracle tips tricks","title":"Oracle"},{"location":"bdd/Oracle/#spfile","text":"SPFILE (Fichier de param\u00e8tres persistant) est un fichier binaire recherch\u00e9 automatiquement au d\u00e9marrage de l\u2019instance. Son nom par d\u00e9faut est spfile .ora. Il est situ\u00e9 dans $ORACLE_HOME/dbs/. Le fichier SPFILE est recommand\u00e9 par Oracle en raison de la possibilit\u00e9 de g\u00e9r\u00e9 dynamiquement de nombreux param\u00e8tres d\u2019initialisation. Il est modifi\u00e9 par le moteur Oracle. PFILE (Fichier de param\u00e8tres statique) est un fichier texte recherch\u00e9 automatiquement au d\u00e9marrage de l\u2019instance en l\u2019absence du fichier SPFILE. Il est modifi\u00e9 manuellement par le DBA. Son nom par d\u00e9faut est : init .ora et il est situ\u00e9 dans $ORACLE_HOME/dbs. Les modifications prennent effet qu\u2019apr\u00e8s le red\u00e9marrage de l\u2019instance. CR\u00c9ER UN SPFILE A PARTIR D\u2019UN PFILE Vous pouvez cr\u00e9er un fichier SPFILE \u00e0 partir d\u2019un fichier PFILE via la commande suivante (instance d\u00e9marr\u00e9e ou non) et ou le nom d\u2019instance est DBA01 : CREATE SPFILE = \u2018$ORACLE_HOME/dbs/spfileDBA01.ora\u2019 FROM PFILE = \u2018$ORACLE_HOME/dbs/initDBA01.ora\u2018","title":"Spfile"},{"location":"bdd/Oracle/#control-file","text":"Le fichier de contr\u00f4le est un fichier binaire, il contient des informations sur la structure physique de la base. Il est cr\u00e9\u00e9 pendant la cr\u00e9ation de la base et il est modifi\u00e9 en permanence. Ce fichier doit \u00eatre toujours disponible car il est consult\u00e9; et modifi\u00e9 fr\u00e9quemment par le serveur oracle. Et il est indispensable pour la restauration de la base. Pour afficher les noms des fichiers de contr\u00f4le on utilise : SHOW PARAMETER CONTROL_FILES SELECT VALUE FROM V$PARAMETER WHERE NAME='control_files';","title":"Control file"},{"location":"bdd/Oracle/#redolog","text":"Les fichiers Redo Logs servent \u00e0 enregistrer toutes les modifications commit\u00e9es effectu\u00e9es sur le base de donn\u00e9es. Ils servent \u00e0 prot\u00e9ger la base de donn\u00e9es dans le cas d\u2019un \u00e9chec d\u2019instance. En cas de restauration de la base de donn\u00e9es, on utilise les redo logs pour \u2018rejouer\u2019 les modifications qui ont eu lieu, les transactions valid\u00e9es (commit \u00e0 la fin de la transaction) sont enregistr\u00e9es dans les fichiers de donn\u00e9es Oracle et les transactions non valid\u00e9es, s\u2019il y en a, sont effac\u00e9es des fichiers de donn\u00e9es.","title":"Redolog"},{"location":"bdd/Oracle/#data-base-file","text":"Les fichiers physiques d\u2019une base Oracle permettent de stocker de mani\u00e8re persistante les donn\u00e9es manipul\u00e9es par Oracle.","title":"Data base file"},{"location":"bdd/Oracle/#archive-log","text":"Quand la base est en mode NOARCHIVELOG, l\u2019archivage des fichiers redo est d\u00e9sactiv\u00e9. Le fichier de contr\u00f4le indique que les groupes des fichiers redo pleins ne sont plus n\u00e9cessaires. D\u00e8s qu\u2019ils sont inactifs apr\u00e8s un log switch, le groupe sera disponible pour une r\u00e9utilisation par la LGWR . \u2192 (lgwr \u00e9crit toutes les entr\u00e9es refaites qui ont \u00e9t\u00e9 copi\u00e9es dans le tampon depuis la derni\u00e8re fois.) Le mode NOARCHIVELOG prot\u00e8ge la base contre une d\u00e9faillance d\u2019instance et non pas contre une d\u00e9faillance media. Seulement les modifications r\u00e9centes dans la base, stock\u00e9s dans les groupes de fichiers redo en ligne seront disponibles pour la restauration de la base. En mode NOARCHIVELOG, on ne peut pas sauvegarder en ligne une tablespace. Pour restaurer une base en mode NOARCHIVELOG, on est oblig\u00e9 de faire une sauvegarde compl\u00e8te quand la base est ferm\u00e9e. Quand la base est en mode ARCHIVELOG, l\u2019archivage des fichiers redo est activ\u00e9. Le fichier de contr\u00f4le de la base signale que les groupes contenant des fichiers redo pleins ne peuvent pas \u00eatre utilis\u00e9s par le process LGWR tant que les groupes n\u2019ont pas \u00e9t\u00e9 archiv\u00e9s. V\u00e9rifier s\u2019il y a pr\u00e9sence d\u2019Archive log : archive log list Conna\u00eetre la destination de chacune d\u2019entre-elles : show parameter log_archive_dest Passer en mode d'archivage (//attention \u00e0 ne pas omettre de monter seulement l'instance afin d'effectuer la manipulation. Celle-ci subira donc une relance //) : ALTER DATABASE ARCHIVELOG;","title":"Archive log"},{"location":"bdd/Oracle/#informations","text":"Conna\u00eetre les informations et version de composant oracle : odacli describe-component Conna\u00eetre le nom de la base sur laquelle on est connect\u00e9e : show parameter name Ou encore pour soucis de suret\u00e9 : show parameter unique Conna\u00eetre le owner d\u2019une table : select disctinct owner from all_tables; Savoir si la base tourne ou non en SQL : SELECT INSTANCE_NAME, STATUS, DATABASE_STATUS FROM V$INSTANCE;","title":"Informations"},{"location":"bdd/Oracle/#diag-tunning","text":"Name Interpr\u00e9ter Syntaxe : CONTROL_MANAGEMENT_PACK_ACCESS = { NONE | DIAGNOSTIC | DIAGNOSTIC+TUNING} D\u00e9sactiver Passon la m\u00e9moire tampon mais aussi le spfile \u00e0 none En tant que sysdba : ALTER SYSTEM SET CONTROL_MANAGEMENT_PACK_ACCESS=NONE SCOPE=BOTH;","title":"Diag Tunning"},{"location":"bdd/Oracle/#check","text":"V\u00e9rifier s\u2019il est activ\u00e9 : show parameter control_management_pack_access Ou encore : select display_value from v$parameter where name = 'control_management_pack_access';","title":"Check"},{"location":"bdd/Oracle/#bring-impdp","text":"R\u00e9ccup\u00e9rer la vue sur un import en bacground : impdp \\ / as sysdba\\ ATTACH= SYS_IMPORT_FULL_01","title":"Bring impdp"},{"location":"bdd/Oracle/#global-prefs","text":"Get Global prefs : SELECT DBMS_STATS.get_prefs('CONCURRENT') FROM dual; Global Perfs State SQL Command True DBMS_STATS.SET_GLOBAL_PREFS('CONCURRENT','TRUE'); False DBMS_STATS.SET_GLOBAL_PREFS('CONCURRENT','FALSE');","title":"Global Prefs"},{"location":"bdd/Oracle/#lsnrctl","text":"L\u2019utilitaire de contr\u00f4le d\u2019\u00e9coute vous permet d\u2019administrer des listeners. Vous pouvez utiliser ses commandes pour ex\u00e9cuter des fonctions de gestion de base sur un ou plusieurs listeners. En outre, vous pouvez afficher et modifier les param\u00e8tres. Commandes possible : - start - Stop - Status - Services - Servacls - Version - Reload - save_config - Trace - Spawn - Quit - Exit - set - show Effectuer un status du service listener : Il se peut que celuic-ci ne se nomme pas LISTENER, il s\u2019agit des param\u00e8tres pas d\u00e9faut : lsnrctl status LISTENER","title":"LSNRCTL"},{"location":"bdd/Oracle/#odacli","text":"R\u00e9pertorier toutes les bases de donn\u00e9es de l\u2019appliance : odacli list-databases Afficher les d\u00e9tails de la base de donn\u00e9es : odacli describe-database Cr\u00e9er une nouvelle base de donn\u00e9es : odacli create-database Supprimer une base de donn\u00e9es : odacli delete-database R\u00e9seau : - On trouvera les identifiants r\u00e9seau : odacli list-network On y trouve tout les d\u00e9tails de ce r\u00e9seau : :: odacli describe-ntwork -i $identifiants_r\u00e9seau","title":"ODACLI"},{"location":"bdd/Oracle/#oswbba","text":"java -jar /opt/oracle/oak/oswbb/oswbba.jar -i /opt/oracle/oak/oswbb/archive -b Mar 18 00:00:00 2019 -e Mar 19 00:00:00","title":"OSWBBA"},{"location":"bdd/Oracle/#ressources","text":"Afin de v\u00e9rifier l\u2019\u00e9tat du param\u00e8tre SESSIONS : SHOW parameter sessions","title":"Ressources"},{"location":"bdd/Oracle/#processes","text":"PROCESSES sp\u00e9cifie le nombre maximal de processus utilisateur du syst\u00e8me d\u2019exploitation pouvant se connecter simultan\u00e9ment \u00e0 Oracle. Sa valeur doit autoriser tous les processus d\u2019arri\u00e8re-plan tels que les verrous, les processus de file d\u2019attente de travaux et les processus d\u2019ex\u00e9cution parall\u00e8les. Les valeurs par d\u00e9faut des param\u00e8tres SESSIONS et TRANSACTIONS sont d\u00e9riv\u00e9es de ce param\u00e8tre. Par cons\u00e9quent, si vous modifiez la valeur de PROCESSES, vous devez d\u00e9terminer si vous souhaitez ajuster les valeurs de ces param\u00e8tres d\u00e9riv\u00e9s. Afin de v\u00e9rifier l\u2019\u00e9tat du param\u00e8tre PROCESSES : SHOW parameter processes Application du param\u00e8tre : ALTER SYSTEM SET processes=[VALUE AS INTEGER] SCOPE=SPFILE ;","title":"Processes"},{"location":"bdd/Oracle/#transactions","text":"TRANSACTIONS sp\u00e9cifie le nombre maximal de transactions simultan\u00e9es. Des valeurs plus \u00e9lev\u00e9es augmentent la taille du SGA et peuvent augmenter le nombre de segments de restauration allou\u00e9s. La valeur par d\u00e9faut est sup\u00e9rieure \u00e0 SESSIONS (et \u00e0 son tour, PROCESSES) pour permettre les transactions r\u00e9cursives.","title":"Transactions"},{"location":"bdd/Oracle/#verifier-les-parametres","text":"Afin de v\u00e9rifier l\u2019\u00e9tat du param\u00e8tre TRANSACTIONS : SHOW parameter transactions Application du param\u00e8tre : ALTER SYSTEM SET transactions=[VALUE AS INTEGER] SCOPE=SPFILE ; :warning: Application des param\u00e8tres : Afin d\u2019appliquer des param\u00e8tres modifi\u00e9s dans le spfile , un relance de l\u2019instance sera requis : shutdown immediate startup","title":"V\u00e9rifier les param\u00e8tres"},{"location":"bdd/Oracle/#account","text":"D\u00e9bloquer des compte v\u00e9rouill\u00e9 : SQL conn / AS sysdba Connected. SQL ALTER USER $USER BY ******** account UNLOCK; USER altered. SQL ALTER USER $USER IDENTIFIED BY ******** account UNLOCK; USER altered.","title":"Account"},{"location":"bdd/Oracle/#sqlplus","text":"Param\u00e9trage de l\u2019interface sqlplus :","title":"SQLPLUS"},{"location":"bdd/Oracle/#linesize","text":"La longueur des lignes par d\u00e9faut 80 caract\u00e8res : set linesize 200","title":"linesize"},{"location":"bdd/Oracle/#col","text":"Il d\u00e9fini un format de sortie pour une colonne particuli\u00e8re : col table_name for a20","title":"col"},{"location":"bdd/Oracle/#set-pause-on","text":"Permet une attente de RETURN pour faire d\u00e9filer les lignes suivantes ( comme la commande more).","title":"set pause on"},{"location":"bdd/Oracle/#spool","text":"La sortie standard et d\u2019erreur est redirig\u00e9e dans le fichier indiqu\u00e9 dans la commande. La commande \u201cspool off\u201d ferme le fichier. Utiliser la commande SQL **start** or **@** pour effectuer les script tel que .sql","title":"spool"},{"location":"bdd/Oracle/#statspack","text":"","title":"STATSPACK"},{"location":"bdd/Oracle/#analyser","text":"Mise en forme du resultat : col OWNER format a10 col SEGMENT_NAME format a60 col SEGMENT_TYPE format a15 set pagesize 1000 select owner,segment_name,segment_type,bytes/1024/1024 fromdba_segments where tablespace_name = 'STATSPACK_TBS' andsegment_type = 'TABLE' order by bytes desc;","title":"Analyser"},{"location":"bdd/Oracle/#corriger","text":"","title":"Corriger"},{"location":"bdd/Oracle/#1-purge-statspack","text":"Renseigner la plage d'id \u00e0 purger : DEFINE losnapid=1 -- low snap id DEFINE hisnapid=2 -- high snap id @?/rdbms/admin/sppurge.sql","title":"1. Purge STATSPACK"},{"location":"bdd/Oracle/#2-move-table","text":"How to move dba_segments : select 'alter table '||owner||'.'||segment_name||' move;' from dba_segments where tablespace_name = 'STATSPACK_TBS' and segment_type = 'TABLE' order by bytes desc;","title":"2. Move table"},{"location":"bdd/Oracle/#3-rebuild-index","text":"How to rebuild dba_indexes : select 'alter index '||owner||'.'||index_name||' rebuild;' from dba_indexes where status = 'UNUSABLE';","title":"3. Rebuild Index"},{"location":"bdd/Oracle/#tnsname","text":"Comment la v\u00e9rifier : [oracle@oda ~]# env | grep TNS TNS_ADMIN=/backup/TNS Le fichier est donc dans /backup/TNS/tnsname.ora .","title":"TNSNAME"},{"location":"bdd/Oracle/#configuration","text":"Voici un exemple de configuration : (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = ''iP de la machine'')(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ''Nom de la base'') ) )","title":"Configuration:"},{"location":"bdd/Oracle/#tablespace","text":"Know the tablesapces size : set line 1000 set pagesize 100 col Tablespace FOR a22 col Used MB FOR 99,999,999 col Free MB FOR 99,999,999 col Total MB FOR 99,999,999 SELECT df.tablespace_name Tablespace , totalusedspace Used MB , (df.totalspace - tu.totalusedspace) Free MB , df.totalspace Total MB , round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace)) Pct. Free , df.MAX_SIZE/1024/1024/1024 Max Size Go FROM (SELECT tablespace_name, round(SUM(bytes) / 1048576) TotalSpace, sum(decode(AUTOEXTENSIBLE, 'YES', MAXBYTES, BYTES)) MAX_SIZE FROM dba_data_files GROUP BY tablespace_name) df, (SELECT round(SUM(bytes)/(1024*1024)) totalusedspace, tablespace_name FROM dba_segments GROUP BY tablespace_name) tu WHERE df.tablespace_name = tu.tablespace_name;","title":"Tablespace"},{"location":"cloud/Amazon-Web-Services/","text":"Amazon Web Services Here are somes aws tips tricks L\u00e9xique : AMI : Amazon Machine Images (template) in progress.. DevOps Implementing Development Processes What is devOPS ? \"DevOps is the unions of people, process and products to enable continuous of value to end users.\" - Donovan Brown Products suite Azure DevOps is a suite of products that allows any organization to do better DevOps : Azure Board Deliver Value to your users daster using proven agile tools to plan, and discuss work across your teams. Azure Pipelines Build, test, and deploy with CI/CD that works with any language, platform, and cloud. Connect to GitHub or any other Git provider and deploy continously Azure Repos Get unlimited, cloud-hosted private Git repos and collaborate to build better code with pull requests and advanced file management. Azure Test Plans Test and ship with confidence using manual and exploratory testing tools. Azure Artifacts Create, host and share packages with your team, and add artifacts to your CI/CD pipelines with a single click. Extensions Marketplace Access extensions from Slack to SonarCloud to 1,000 other apps and services \u2013 built by the community.","title":"Amazon Web Services"},{"location":"cloud/Amazon-Web-Services/#amazon-web-services","text":"Here are somes aws tips tricks","title":"Amazon Web Services"},{"location":"cloud/Amazon-Web-Services/#lexique","text":"AMI : Amazon Machine Images (template) in progress..","title":"L\u00e9xique :"},{"location":"cloud/Amazon-Web-Services/#devops-implementing-development-processes","text":"","title":"DevOps Implementing Development Processes"},{"location":"cloud/Amazon-Web-Services/#what-is-devops","text":"\"DevOps is the unions of people, process and products to enable continuous of value to end users.\" - Donovan Brown","title":"What is devOPS ?"},{"location":"cloud/Amazon-Web-Services/#products-suite","text":"Azure DevOps is a suite of products that allows any organization to do better DevOps : Azure Board Deliver Value to your users daster using proven agile tools to plan, and discuss work across your teams. Azure Pipelines Build, test, and deploy with CI/CD that works with any language, platform, and cloud. Connect to GitHub or any other Git provider and deploy continously Azure Repos Get unlimited, cloud-hosted private Git repos and collaborate to build better code with pull requests and advanced file management. Azure Test Plans Test and ship with confidence using manual and exploratory testing tools. Azure Artifacts Create, host and share packages with your team, and add artifacts to your CI/CD pipelines with a single click. Extensions Marketplace Access extensions from Slack to SonarCloud to 1,000 other apps and services \u2013 built by the community.","title":"Products suite"},{"location":"cloud/Cloud-Platformes/","text":"Cloud platformes Cas d'usage Il \u00e9xiste en r\u00e9alist\u00e9 divers type de platformes dans le cloud. Chacune d'entre elle on leur sp\u00e9cificit\u00e9es. On trouvera diff\u00e9rents type de platformes : - IAAS (Infrastructure en tant que service) Il contient les blocs de construction fondamentaux de l'informatique dans le cloud et donne habituellement acc\u00e8s \u00e0 des fonctionnalit\u00e9s de mise en r\u00e9seau, \u00e0 des ordinateurs (virtuels ou sur du mat\u00e9riel d\u00e9di\u00e9) et \u00e0 de l'espace de stockage de donn\u00e9es. Le service IaaS offre le niveau le plus \u00e9lev\u00e9 de flexibilit\u00e9 et de contr\u00f4le de gestion en ce qui concerne les ressources informatiques. Ce services est tr\u00e8s similaire aux ressources informatiques existantes avec lesquelles les services informatiques et les d\u00e9veloppeurs sont aujourd'hui familiaris\u00e9s. PAAS (Plate-forme en tant que service) Gr\u00e2ce au service PaaS, les entreprises n'ont plus besoin de g\u00e9rer l'infrastructure sous-jacente (en r\u00e8gle g\u00e9n\u00e9rale, le mat\u00e9riel et les syst\u00e8mes d'exploitation) et vous pouvez vous concentrer sur le d\u00e9ploiement et la gestion de vos applications. Vous \u00eates ainsi plus efficace, car vous n'avez pas \u00e0 vous soucier de l'approvisionnement des ressources, de la planification des capacit\u00e9s, de la maintenance logicielle, de l'application de correctifs ou de toute autre charge indiff\u00e9renci\u00e9e li\u00e9e \u00e0 l'ex\u00e9cution de votre application. SAAS (Logiciel en tant que service ) Le logiciel en tant que service offre un produit final qui est ex\u00e9cut\u00e9 et g\u00e9r\u00e9 par le prestataire de services. Dans la plupart des cas, les personnes qui font r\u00e9f\u00e9rence au service Saas pensent aux applications des utilisateurs finaux. Avec une offre SaaS, vous n'avez pas \u00e0 vous soucier de la gestion du service ou de celle de l'infrastructure sous-jacente. Vous devez juste r\u00e9fl\u00e9chir \u00e0 l'utilisation de ce logiciel sp\u00e9cifique. Une messagerie Web dans laquelle vous pouvez envoyer et recevoir des e-mails sans avoir \u00e0 g\u00e9rer des ajouts de fonctionnalit\u00e9s ni \u00e0 effectuer la maintenance des serveurs et des syst\u00e8mes d'exploitation sur lesquels elle s'ex\u00e9cute est un exemple courant d'application SaaS.","title":"Cloud platformes"},{"location":"cloud/Cloud-Platformes/#cloud-platformes","text":"","title":"Cloud platformes"},{"location":"cloud/Cloud-Platformes/#cas-dusage","text":"Il \u00e9xiste en r\u00e9alist\u00e9 divers type de platformes dans le cloud. Chacune d'entre elle on leur sp\u00e9cificit\u00e9es. On trouvera diff\u00e9rents type de platformes : - IAAS (Infrastructure en tant que service) Il contient les blocs de construction fondamentaux de l'informatique dans le cloud et donne habituellement acc\u00e8s \u00e0 des fonctionnalit\u00e9s de mise en r\u00e9seau, \u00e0 des ordinateurs (virtuels ou sur du mat\u00e9riel d\u00e9di\u00e9) et \u00e0 de l'espace de stockage de donn\u00e9es. Le service IaaS offre le niveau le plus \u00e9lev\u00e9 de flexibilit\u00e9 et de contr\u00f4le de gestion en ce qui concerne les ressources informatiques. Ce services est tr\u00e8s similaire aux ressources informatiques existantes avec lesquelles les services informatiques et les d\u00e9veloppeurs sont aujourd'hui familiaris\u00e9s. PAAS (Plate-forme en tant que service) Gr\u00e2ce au service PaaS, les entreprises n'ont plus besoin de g\u00e9rer l'infrastructure sous-jacente (en r\u00e8gle g\u00e9n\u00e9rale, le mat\u00e9riel et les syst\u00e8mes d'exploitation) et vous pouvez vous concentrer sur le d\u00e9ploiement et la gestion de vos applications. Vous \u00eates ainsi plus efficace, car vous n'avez pas \u00e0 vous soucier de l'approvisionnement des ressources, de la planification des capacit\u00e9s, de la maintenance logicielle, de l'application de correctifs ou de toute autre charge indiff\u00e9renci\u00e9e li\u00e9e \u00e0 l'ex\u00e9cution de votre application. SAAS (Logiciel en tant que service ) Le logiciel en tant que service offre un produit final qui est ex\u00e9cut\u00e9 et g\u00e9r\u00e9 par le prestataire de services. Dans la plupart des cas, les personnes qui font r\u00e9f\u00e9rence au service Saas pensent aux applications des utilisateurs finaux. Avec une offre SaaS, vous n'avez pas \u00e0 vous soucier de la gestion du service ou de celle de l'infrastructure sous-jacente. Vous devez juste r\u00e9fl\u00e9chir \u00e0 l'utilisation de ce logiciel sp\u00e9cifique. Une messagerie Web dans laquelle vous pouvez envoyer et recevoir des e-mails sans avoir \u00e0 g\u00e9rer des ajouts de fonctionnalit\u00e9s ni \u00e0 effectuer la maintenance des serveurs et des syst\u00e8mes d'exploitation sur lesquels elle s'ex\u00e9cute est un exemple courant d'application SaaS.","title":"Cas d'usage"},{"location":"cloud/Google-Cloud-Platform/","text":"Google Cloud Platformes Here are somes aws tips tricks in progress..","title":"Google Cloud Platformes"},{"location":"cloud/Google-Cloud-Platform/#google-cloud-platformes","text":"Here are somes aws tips tricks in progress..","title":"Google Cloud Platformes"},{"location":"cloud/Microsoft-Azure/","text":"Microsoft Azure Activer la journalisation \u00e0 l\u2019aide d\u2019Azure CLI La version actuelle d\u2019Azure CLI ne vous permet pas de g\u00e9rer la journalisation des applications dans Stockage Blob. Pour activer la journalisation des applications dans le syst\u00e8me de fichiers, ex\u00e9cutez cette commande : az webapp log config --application-logging true --level verbose --name --resource-group Par exemple, pour activer la journalisation dans le syst\u00e8me de fichiers pour une application appel\u00e9e contosofashions123 en capturant tous les messages, ex\u00e9cutez cette commande. az webapp log config --application-logging true --level verbose --name contosofashions123 --resource-group contosofashionsRG Il n\u2019existe actuellement aucun moyen de d\u00e9sactiver la journalisation des applications \u00e0 l\u2019aide de commandes Azure CLI. Toutefois, la commande suivante permet de r\u00e9initialiser la journalisation dans le syst\u00e8me de fichiers au niveau erreur simplement. az webapp log config --application-logging false --name --resource-group Pour conna\u00eetre l\u2019\u00e9tat actuel de la journalisation d\u2019une application, utilisez cette commande. az webapp log show --name --resource-group","title":"Microsoft Azure"},{"location":"cloud/Microsoft-Azure/#microsoft-azure","text":"","title":"Microsoft Azure"},{"location":"cloud/Microsoft-Azure/#activer-la-journalisation-a-laide-dazure-cli","text":"La version actuelle d\u2019Azure CLI ne vous permet pas de g\u00e9rer la journalisation des applications dans Stockage Blob. Pour activer la journalisation des applications dans le syst\u00e8me de fichiers, ex\u00e9cutez cette commande : az webapp log config --application-logging true --level verbose --name --resource-group Par exemple, pour activer la journalisation dans le syst\u00e8me de fichiers pour une application appel\u00e9e contosofashions123 en capturant tous les messages, ex\u00e9cutez cette commande. az webapp log config --application-logging true --level verbose --name contosofashions123 --resource-group contosofashionsRG Il n\u2019existe actuellement aucun moyen de d\u00e9sactiver la journalisation des applications \u00e0 l\u2019aide de commandes Azure CLI. Toutefois, la commande suivante permet de r\u00e9initialiser la journalisation dans le syst\u00e8me de fichiers au niveau erreur simplement. az webapp log config --application-logging false --name --resource-group Pour conna\u00eetre l\u2019\u00e9tat actuel de la journalisation d\u2019une application, utilisez cette commande. az webapp log show --name --resource-group","title":"Activer la journalisation \u00e0 l\u2019aide d\u2019Azure CLI"},{"location":"cloud/Oracle-Cloud-Infrastructure/","text":"Oracle Cloud Infrastructure Here are somes oci tips tricks in progress..","title":"Oracle Cloud Infrastructure"},{"location":"cloud/Oracle-Cloud-Infrastructure/#oracle-cloud-infrastructure","text":"Here are somes oci tips tricks in progress..","title":"Oracle Cloud Infrastructure"},{"location":"dev/Ansible/","text":"Ansible Here are somes ansible tips tricks Pense b\u00eate List d'argument : - -i : Sp\u00e9cifier le fichier d'inventaire - -C,--check : V\u00e9rifier la.es action.s qui sera.ont r\u00e9alis\u00e9e.s - -m : Sp\u00e9cifier le module que l'on souhaite invoquer - -k : Demander le mot de passe user - -K : Demander le mot de passe root - -b,--become : \u00c9x\u00e9cuter en tant que su ( admin) L\u00e9xique Action Une action fait partie d\u2019une t\u00e2che qui pr\u00e9cise les modules \u00e0 ex\u00e9cuter et les arguments \u00e0 transmettre \u00e0 ce module. Chaque t\u00e2che ne peut avoir qu\u2019une seule action, mais elle peut aussi avoir d\u2019autres param\u00e8tres. Ad Hoc D\u00e9signe l\u2019ex\u00e9cution d\u2019Ansible pour ex\u00e9cuter une commande rapide, en utilisant /usr/bin/ansible, plut\u00f4t que le langage d\u2019orchestration, qui est /usr/bin/ansible-playbook. Un exemple de commande ad hoc pourrait \u00eatre le red\u00e9marrage de 50 machines dans votre infrastructure. Tout ce que vous pouvez faire ad hoc peut \u00eatre accompli en \u00e9crivant un livre de jeu et les livres de jeu peuvent \u00e9galement cumuler beaucoup d\u2019autres op\u00e9rations ensemble. Async D\u00e9signe une t\u00e2che qui est configur\u00e9e pour \u00eatre ex\u00e9cut\u00e9e en arri\u00e8re-plan plut\u00f4t que d\u2019attendre l\u2019ach\u00e8vement. Si vous avez un long processus qui durerait plus longtemps que le d\u00e9lai d\u2019attente SSH, il serait logique de lancer cette t\u00e2che en mode asynchrone. Les modes Asynchrones peuvent \u00eatre interrog\u00e9s toutes les secondes ou peuvent \u00eatre configur\u00e9s pour \u201ctirer et oublier\u201d, auquel cas Ansible ne v\u00e9rifiera m\u00eame pas \u00e0 nouveau la t\u00e2che ; il la d\u00e9clenchera simplement et passera aux \u00e9tapes suivantes. Les modes asynchrones fonctionnent avec /usr/bin/ansible et /usr/bin/ansible-playbook. Callback Plugin D\u00e9signe un code \u00e9crit par l\u2019utilisateur qui peut intercepter les r\u00e9sultats d\u2019Ansible et en faire quelque chose. Quelques exemples fournis dans le projet GitHub permettent d\u2019effectuer des enregistrements personnalis\u00e9s, d\u2019envoyer des courriels ou m\u00eame de jouer des effets sonores. Check Mode D\u00e9signe l\u2019ex\u00e9cution d\u2019Ansible avec l\u2019option --check, qui n\u2019apporte aucune modification sur les syst\u00e8mes distants, mais n\u2019affiche que les modifications qui peuvent survenir si la commande s\u2019ex\u00e9cute sans ce drapeau. Ceci est analogue aux modes dits \u201cmarche \u00e0 vide\u201d dans d\u2019autres syst\u00e8mes, mais l\u2019utilisateur doit \u00eatre averti que ceci ne tient pas compte des d\u00e9faillances inattendues des commandes ou des effets en cascade (ce qui est vrai pour des modes similaires dans d\u2019autres syst\u00e8mes). Utilisez ceci pour vous faire une id\u00e9e de ce qui pourrait arriver, mais ne le remplacez pas par un bon environnement de mise en sc\u00e8ne. Plugin de connexion Par d\u00e9faut, Ansible communique avec les machines distantes via des biblioth\u00e8ques enfichables. Ansible supporte OpenSSH (SSH (Native)) ou une impl\u00e9mentation Python appel\u00e9e paramiko. OpenSSH est pr\u00e9f\u00e9r\u00e9 si vous utilisez une version r\u00e9cente, et permet \u00e9galement certaines fonctionnalit\u00e9s comme Kerberos et les h\u00f4tes de saut. Ceci est couvert dans la section Mise en route. Il existe aussi d\u2019autres types de connexion comme le mode acc\u00e9l\u00e9r\u00e9, qui doit \u00eatre amorc\u00e9 sur l\u2019un des types de connexion bas\u00e9s sur SSH mais qui est tr\u00e8s rapide, et le mode local, qui agit sur le syst\u00e8me local. Les utilisateurs peuvent \u00e9galement \u00e9crire leurs propres plugins de connexion. Conditionals Un conditionnel est une expression qui \u00e9value \u00e0 vrai ou faux qui d\u00e9cide si une t\u00e2che donn\u00e9e est ex\u00e9cut\u00e9e sur une machine donn\u00e9e ou non. Les conditionnels d\u2019Ansible sont aliment\u00e9s par l\u2019instruction \u2018when:\u2019. D\u00e9claratif Une approche pour r\u00e9aliser une t\u00e2che qui utilise une description de l\u2019\u00e9tat final plut\u00f4t qu\u2019une description de la s\u00e9quence des \u00e9tapes n\u00e9cessaires pour atteindre cet \u00e9tat. Pour un exemple du monde r\u00e9el, une sp\u00e9cification d\u00e9clarative d\u2019une t\u00e2che serait : \u201cmettez-moi en Californie\u201d. Selon votre emplacement actuel, la s\u00e9quence des \u00e9tapes pour vous rendre en Californie peut varier, et si vous \u00eates d\u00e9j\u00e0 en Californie, rien ne doit \u00eatre fait du tout. Les Ressources d\u2019Ansible sont d\u00e9claratives ; elles d\u00e9terminent les \u00e9tapes n\u00e9cessaires pour atteindre l\u2019\u00e9tat final. Il vous permet \u00e9galement de savoir si des mesures doivent \u00eatre prises ou non pour arriver \u00e0 l\u2019\u00e9tat final. Mode Diff Un drapeau --diff peut \u00eatre pass\u00e9 \u00e0 Ansible pour montrer ce qui a chang\u00e9 sur les modules qui le supportent. Vous pouvez le combiner avec --check pour obtenir un bon \u201ctest\u201d. Les diffs de fichiers sont normalement dans un format de diff unifi\u00e9. Executor Un composant logiciel de base d\u2019Ansible qui est la puissance derri\u00e8re /usr/bin/ansible directement - et correspond \u00e0 l\u2019invocation de chaque t\u00e2che dans un playbook. L\u2019ex\u00e9cuteur est quelque chose dont les d\u00e9veloppeurs d\u2019Ansible peuvent parler, mais ce n\u2019est pas vraiment dans le vocabulaire de l\u2019utilisateur commun. Facts Les \u201cfacts\u201d sont simplement des choses que l\u2019on d\u00e9couvre au sujet des n\u0153uds distants. Bien qu\u2019ils puissent \u00eatre utilis\u00e9s dans des livres de jeu et des mod\u00e8les tout comme les variables, les \u201cfacts\u201d sont des choses qui sont d\u00e9duites, plut\u00f4t que d\u00e9finies. Les \u201cfacts\u201d sont automatiquement d\u00e9couverts par Ansible lors de l\u2019ex\u00e9cution d\u2019une lecture de livre de jeu en ex\u00e9cutant le module de configuration interne sur les n\u0153uds distants. Il n\u2019est jamais n\u00e9cessaire d\u2019appeler le module \u201csetup\u201d explicitement, il s\u2019ex\u00e9cute simplement, mais il peut \u00eatre d\u00e9sactiv\u00e9 pour gagner du temps s\u2019il n\u2019est pas n\u00e9cessaire ou vous pouvez dire \u00e0 ansible de ne collecter qu\u2019un sous-ensemble des faits complets via l\u2019option gather_subset:. Pour la commodit\u00e9 des utilisateurs qui passent d\u2019autres syst\u00e8mes de gestion de configuration, le module factuel tirera \u00e9galement des faits des outils ohai et facter s\u2019ils sont install\u00e9s. Ce sont des biblioth\u00e8ques de \u201cfacts\u201d de Chef et Puppet, respectivement. (Ceux-ci peuvent aussi \u00eatre d\u00e9sactiv\u00e9s via gather_subset:) Plugin de filtrage Un plugin de filtrage est quelque chose que la plupart des utilisateurs n\u2019auront jamais besoin de comprendre. Ceux-ci permettent la cr\u00e9ation de nouveaux filtres Jinja2, qui ne sont plus ou moins utiles qu\u2019aux personnes qui savent ce que sont les filtres Jinja2. Si vous en avez besoin, vous pouvez apprendre \u00e0 les \u00e9crire dans la section documentation de l\u2019API. Forks Il est possible de dialoguer en parall\u00e8le avec des n\u0153uds distants et de d\u00e9finir le niveau de parall\u00e9lisme soit en passant --forks \u00e0 la commande ansible, soit en \u00e9ditant la valeur par d\u00e9faut dans un fichier de configuration. La valeur par d\u00e9faut est une fourche \u00e0 cinq (5) forks tr\u00e8s conservatrice. Si vous avez beaucoup de RAM, vous pouvez facilement r\u00e9gler cette valeur \u00e0 une valeur comme 50 pour un parall\u00e9lisme accru. Gather Facts (bool\u00e9en) Les \u201cfacts\u201d ont \u00e9t\u00e9 mentionn\u00e9s ci-dessus. Parfois, lors de l\u2019ex\u00e9cution d\u2019un livre de jeu multi-jeux, il est souhaitable d\u2019avoir quelques jeux qui ne collectent pas de \u201cfacts\u201d car ils n\u2019en n\u2019ont pas besoin. D\u00e9finir gather_facts: False dans un jeu permet de sauter cette collecte implicite de faits. Globbing Le \u201cGlobbing\u201d est un moyen de s\u00e9lectionner un grand nombre d\u2019h\u00f4tes en se basant sur des caract\u00e8res g\u00e9n\u00e9riques, plut\u00f4t que de le faire sur le nom de l\u2019h\u00f4te en particulier, ou le nom du groupe dans lequel ils se trouvent. Par exemple, il est possible de s\u00e9lectionner ww* pour faire correspondre tous les h\u00f4tes en commen\u00e7ant par www. Ce concept est tir\u00e9 directement de Func, l\u2019un des projets pr\u00e9c\u00e9dents de Michael DeHaan (Ansible Founder). Groupe d\u2019inventaire Un groupe d\u2019inventaire se compose de plusieurs h\u00f4tes assign\u00e9s \u00e0 un pool qui peuvent \u00eatre facilement cibl\u00e9s ensemble, ainsi que de variables donn\u00e9es qu\u2019ils partagent en commun. Group Vars Les dossier group_vars/ comprend des fichiers qui vivent dans un r\u00e9pertoire \u00e0 c\u00f4t\u00e9 d\u2019un fichier d\u2019inventaire, avec un nom de fichier facultatif nomm\u00e9 du nom de chaque groupe. C\u2019est un endroit pratique pour placer les variables qui sont fournies \u00e0 un groupe donn\u00e9, en particulier les structures de donn\u00e9es complexes, de sorte que ces variables n\u2019ont pas \u00e0 \u00eatre int\u00e9gr\u00e9es dans le fichier d\u2019inventaire ou dans le livre de jeu. Handlers Les \u201cHandlers\u201d sont comme les t\u00e2ches r\u00e9guli\u00e8res dans un playbook Ansible (voir T\u00e2ches) mais ne sont ex\u00e9cut\u00e9s que si la t\u00e2che contient une directive notify et \u00e9galement si elle indique qu\u2019elle a chang\u00e9 quelque chose. Par exemple, si un fichier de configuration est modifi\u00e9, la t\u00e2che faisant r\u00e9f\u00e9rence \u00e0 l\u2019op\u00e9ration de mod\u00e9lisation du fichier de configuration peut avertir un gestionnaire (\u201chandler\u201d) de red\u00e9marrage du service. Les gestionnaires peuvent \u00eatre utilis\u00e9s \u00e0 d\u2019autres fins que le red\u00e9marrage du service, mais le red\u00e9marrage du service est l\u2019utilisation la plus courante. H\u00f4te (Host) Un h\u00f4te est simplement une machine distante qu\u2019Ansible g\u00e8re. Des variables individuelles peuvent leur \u00eatre affect\u00e9es et elles peuvent \u00e9galement \u00eatre organis\u00e9es en groupes. Tous les h\u00f4tes ont un nom d\u2019acc\u00e8s (adresse IP ou nom de domaine) et, facultativement, un num\u00e9ro de port, s\u2019ils ne sont pas accessibles sur le port SSH par d\u00e9faut. Host Specifier Chaque jeu dans Ansible applique une s\u00e9rie de t\u00e2ches (qui d\u00e9finissent le r\u00f4le, le but ou les ordres d\u2019un syst\u00e8me) \u00e0 un ensemble de syst\u00e8mes. hosts: est la directive dans chaque jeu qui est souvent appel\u00e9e le sp\u00e9cificateur hosts et qui configure ce comportement. Il peut s\u00e9lectionner un syst\u00e8me, plusieurs syst\u00e8mes, un ou plusieurs groupes, ou m\u00eame certains h\u00f4tes qui sont dans un groupe et explicitement pas dans un autre. Host Vars Tout comme les \u201cGroup Vars\u201d, un r\u00e9pertoire \u00e0 c\u00f4t\u00e9 du fichier d\u2019inventaire nomm\u00e9 host_vars/ peut contenir un fichier nomm\u00e9 d\u2019apr\u00e8s chaque nom d\u2019h\u00f4te du fichier d\u2019inventaire, au format YAML. Ceci fournit un endroit pratique pour assigner des variables \u00e0 l\u2019h\u00f4te sans avoir \u00e0 les int\u00e9grer dans le fichier d\u2019inventaire. Le fichier \u201cHost Vars\u201d peut \u00e9galement \u00eatre utilis\u00e9 pour d\u00e9finir des structures de donn\u00e9es complexes qui ne peuvent pas \u00eatre repr\u00e9sent\u00e9es dans le fichier d\u2019inventaire. Idempotence Une op\u00e9ration est idempotente si le r\u00e9sultat de son ex\u00e9cution unique est exactement le m\u00eame que le r\u00e9sultat de son ex\u00e9cution r\u00e9p\u00e9t\u00e9e sans aucune action interm\u00e9diaire. Includes L\u2019id\u00e9e que les fichiers de livre de jeu (qui ne sont rien de plus que des listes de jeux) peuvent inclure d\u2019autres listes de jeux, et les listes de t\u00e2ches peuvent \u00eatre externalis\u00e9es dans des listes de t\u00e2ches contenues dans d\u2019autres fichiers, et de m\u00eame avec des \u201chandlers\u201d. Les \u201cIncludes\u201d peuvent \u00eatre param\u00e9tr\u00e9s, ce qui signifie que le fichier charg\u00e9 en m\u00e9moire peut passer des variables. Par exemple, un jeu inclus pour cr\u00e9er un blog WordPress peut prendre un param\u00e8tre appel\u00e9 utilisateur et ce jeu peut \u00eatre inclus plus d\u2019une fois pour cr\u00e9er un blog pour alice et bob. Inventaire Un fichier (par d\u00e9faut, Ansible utilise un format INI simple) qui d\u00e9crit les h\u00f4tes et les groupes dans Ansible. L\u2019inventaire peut \u00e9galement \u00eatre fourni via un script d\u2019inventaire (parfois appel\u00e9 \u201cExternal Inventory Script\u201d). Script d\u2019inventaire Un programme tr\u00e8s simple (ou compliqu\u00e9) qui recherche des h\u00f4tes, leur appartenance \u00e0 un groupe d\u2019h\u00f4tes et des informations variables \u00e0 partir d\u2019une ressource externe - que ce soit une base de donn\u00e9es SQL, une solution CMDB, ou quelque chose comme LDAP. Ce concept a \u00e9t\u00e9 adapt\u00e9 de Puppet (o\u00f9 il est appel\u00e9 \u201cExternal Nodes Classifier\u201d) et fonctionne plus ou moins exactement de la m\u00eame mani\u00e8re. Jinja2 Jinja2 est le langage de template pr\u00e9f\u00e9r\u00e9 du module de template d\u2019Ansible. C\u2019est un langage de template Python tr\u00e8s simple, g\u00e9n\u00e9ralement lisible et facile \u00e0 \u00e9crire. JSON Ansible utilise JSON pour les donn\u00e9es de retour des modules distants. Cela permet aux modules d\u2019\u00eatre \u00e9crits dans n\u2019importe quel langage, pas seulement en Python. Lazy Evaluation En g\u00e9n\u00e9ral, Ansible \u00e9value toutes les variables du contenu du livre de jeu \u00e0 la derni\u00e8re seconde, ce qui signifie que si vous d\u00e9finissez une structure de donn\u00e9es, cette structure de donn\u00e9es elle-m\u00eame peut d\u00e9finir des valeurs de variables en son sein, et tout \u201cfonctionne\u201d comme vous pouvez vous y attendre. Cela signifie \u00e9galement que les cha\u00eenes de caract\u00e8res variables peuvent inclure d\u2019autres variables \u00e0 l\u2019int\u00e9rieur de ces cha\u00eenes. Library Une collection de modules mis \u00e0 disposition de /usr/bin/ansible ou d\u2019un playbook Ansible. Limit Groups En passant --limit somegroup aux commandes ansible ou ansible-playbook, leur ex\u00e9cution peut \u00eatre limit\u00e9e \u00e0 un sous-ensemble d\u2019h\u00f4tes. Par exemple, ceci peut \u00eatre utilis\u00e9 pour ex\u00e9cuter un livre de jeu qui cible normalement un ensemble entier de serveurs vers un serveur particulier. Local Action Une directive local_action dans un livre de jeu ciblant des machines distantes signifie que l\u2019\u00e9tape donn\u00e9e se produira effectivement sur la machine locale, mais que la variable {{ ansible_hostname }} peut \u00eatre pass\u00e9e pour r\u00e9f\u00e9rencer le nom d\u2019h\u00f4te distant auquel elle fait r\u00e9f\u00e9rence. Ceci peut \u00eatre utilis\u00e9 pour d\u00e9clencher, par exemple, une op\u00e9ration rsync ou encore approvisionner des h\u00f4tes d\u2019inventaire qui n\u2019existent pas d\u00e9j\u00e0 aupr\u00e8s d\u2019un fournisseur en nuage. Local Connection En utilisant la connexion: local dans un jeu, ou en passant -c local \u00e0 la commande /usr/bin/ansible, cela indique que nous g\u00e9rons l\u2019h\u00f4te local et non une machine distante. Plugin de recherche Un plugin de recherche est un moyen d\u2019obtenir des donn\u00e9es dans Ansible \u00e0 partir du monde ext\u00e9rieur. Les plugins de recherche sont une extension de Jinja2 et peuvent \u00eatre appel\u00e9s \u00e0 partir des mod\u00e8les, par exemple, {{research('file','/path/to/file') }}. Loops Ansible n\u2019est pas un langage de programmation. Il pr\u00e9f\u00e8re \u00eatre plus d\u00e9claratif, bien que diverses constructions comme la boucle permettent de r\u00e9p\u00e9ter une t\u00e2che particuli\u00e8re pour plusieurs \u00e9l\u00e9ments d\u2019une liste. Certains modules, comme yum et apt, prennent en fait les listes directement, et peuvent installer tous les paquets donn\u00e9s dans ces listes en une seule transaction, ce qui acc\u00e9l\u00e8re consid\u00e9rablement le temps total de configuration, de sorte qu\u2019ils peuvent \u00eatre utilis\u00e9s sans boucle. Modules Les modules sont les unit\u00e9s de travail qu\u2019Ansible exp\u00e9die aux machines distantes. Les modules sont lanc\u00e9s par /usr/bin/ansible ou /usr/bin/ansible-playbook (o\u00f9 plusieurs t\u00e2ches utilisent beaucoup de modules diff\u00e9rents en m\u00eame temps). Les modules peuvent \u00eatre impl\u00e9ment\u00e9s dans n\u2019importe quel langage, y compris Perl, Bash, ou Ruby - mais peuvent tirer parti d\u2019un code de biblioth\u00e8que communautaire utile si il est \u00e9crit en Python. Les modules n\u2019ont qu\u2019\u00e0 retourner JSON. Une fois que les modules sont ex\u00e9cut\u00e9s sur des machines distantes, ils sont supprim\u00e9s, de sorte qu\u2019aucun d\u00e9mon de longue dur\u00e9e n\u2019est utilis\u00e9. Ansible fait r\u00e9f\u00e9rence \u00e0 la collection de modules disponibles en tant que biblioth\u00e8que. Multi-Tier Multi-Tier est le concept selon lequel les syst\u00e8mes informatiques ne sont pas g\u00e9r\u00e9s un syst\u00e8me \u00e0 la fois, mais par des interactions entre plusieurs syst\u00e8mes et des groupes de syst\u00e8mes dans des ordres bien d\u00e9finis. Par exemple, un serveur Web peut avoir besoin d\u2019\u00eatre mis \u00e0 jour avant un serveur de base de donn\u00e9es et des \u00e9l\u00e9ments sur le serveur Web peuvent avoir besoin d\u2019\u00eatre mis \u00e0 jour apr\u00e8s. Ansible mod\u00e9lise l\u2019ensemble des topologies et des workflows informatiques plut\u00f4t que d\u2019envisager la configuration dans une perspective \u201cun syst\u00e8me \u00e0 la fois\u201d. Notify L\u2019acte d\u2019une t\u00e2che enregistrant un \u00e9v\u00e9nement de changement et informant un gestionnaire (\u201chandler\u201d) de t\u00e2che qu\u2019une autre action doit \u00eatre ex\u00e9cut\u00e9e \u00e0 la fin du jeu. Si un \u201chandler\u201d est notifi\u00e9 par plusieurs t\u00e2ches, il ne sera ex\u00e9cut\u00e9 qu\u2019une seule fois. Les gestionnaires sont ex\u00e9cut\u00e9s dans l\u2019ordre dans lequel ils sont list\u00e9s, et non dans l\u2019ordre dans lequel ils sont notifi\u00e9s. Orchestration De nombreux syst\u00e8mes logiciels d\u2019automatisation utilisent ce mot pour signifier diff\u00e9rentes choses. Ansible l\u2019utilise comme chef d\u2019orchestre pour diriger un orchestre. L\u2019architecture d\u2019un centre de donn\u00e9es ou d\u2019un cloud est pleine de nombreux syst\u00e8mes, jouant de nombreux r\u00f4les - serveurs web, serveurs de bases de donn\u00e9es, peut-\u00eatre des \u00e9quilibreurs de charge, des syst\u00e8mes de surveillance, syst\u00e8mes d\u2019int\u00e9gration continue, etc. Dans l\u2019ex\u00e9cution de tout processus, il est n\u00e9cessaire de toucher les syst\u00e8mes avec des commandes particuli\u00e8res, souvent pour simuler des mises-\u00e0-jour continues ou pour d\u00e9ployer le logiciel correctement. Certains syst\u00e8mes peuvent effectuer certaines \u00e9tapes, puis d\u2019autres d\u2019autres \u00e9tapes, puis les syst\u00e8mes pr\u00e9c\u00e9dents d\u00e9j\u00e0 trait\u00e9s peuvent avoir besoin d\u2019effectuer d\u2019autres \u00e9tapes. En cours de route, il peut \u00eatre n\u00e9cessaire d\u2019envoyer des courriels ou de communiquer avec des services Web. Une orchestration possible consiste \u00e0 mod\u00e9liser ce genre de processus. Paramiko Par d\u00e9faut, Ansible g\u00e8re les machines via SSH. La biblioth\u00e8que qu\u2019Ansible utilise par d\u00e9faut pour ce faire est une biblioth\u00e8que aliment\u00e9e par Python appel\u00e9e paramiko. La librairie paramiko est g\u00e9n\u00e9ralement rapide et facile \u00e0 g\u00e9rer, bien que les utilisateurs d\u00e9sirant la prise en charge de Kerberos ou de Jump Host puissent passer \u00e0 un binaire SSH natif tel que OpenSSH en sp\u00e9cifiant le type de connexion dans leurs playbooks, ou en utilisant le drapeau -c ssh. Livres de jeux Les Livres de jeux (playbooks) sont la langue par laquelle Ansible orchestre, configure, administre ou d\u00e9ploie les syst\u00e8mes. On les appelle en partie des playbooks parce que c\u2019est une analogie sportive, et c\u2019est cens\u00e9 \u00eatre amusant de les utiliser. Ce ne sont pas des cahiers d\u2019exercices :) Jeux (Plays) Un livre de jeu est une liste de jeux. Un jeu est au minimum une correspondance entre un ensemble d\u2019h\u00f4tes s\u00e9lectionn\u00e9s par un sp\u00e9cificateur d\u2019h\u00f4te (g\u00e9n\u00e9ralement choisis par des groupes mais parfois par des globes de nom d\u2019h\u00f4te) et les t\u00e2ches qui s\u2019ex\u00e9cutent sur ces h\u00f4tes pour d\u00e9finir le r\u00f4le que ces syst\u00e8mes vont jouer. Il peut y avoir un ou plusieurs jeu dans un livre de jeu. Mode Pull (traction) Par d\u00e9faut, Ansible fonctionne en mode \u201cpush\u201d, ce qui lui permet de contr\u00f4ler tr\u00e8s finement le moment pendant lequel il parle \u00e0 chaque syst\u00e8me. Le mode Pull est pr\u00e9vu lorsque vous pr\u00e9f\u00e9rez que les n\u0153uds v\u00e9rifient un livre de jeu toutes les N minutes sur un horaire particulier. Il utilise un programme appel\u00e9 ansible-pull et peut \u00e9galement \u00eatre configur\u00e9 (ou reconfigur\u00e9) \u00e0 l\u2019aide d\u2019un playbook en mode \u201cpush\u201d. La plupart des utilisateurs d\u2019Ansible utilisent le mode \u201cpush\u201d, mais le mode \u201cpull\u201d est inclus pour la vari\u00e9t\u00e9 et le fait d\u2019avoir des alternatives. ansible-pull fonctionne en v\u00e9rifiant les commandes de configuration git avec un crontab puis en g\u00e9rant la machine localement, en utilisant le plugin de connexion local. Mode Push Le mode \u201cPush\u201d est le mode par d\u00e9faut d\u2019Ansible. En fait, ce n\u2019est pas vraiment un mode du tout - c\u2019est juste la mani\u00e8re dont Ansible fonctionne quand on n\u2019y pense pas. Le mode \u201cpush\u201d permet \u00e0 Ansible d\u2019\u00eatre finement granul\u00e9 et de conduire les n\u0153uds \u00e0 traveNurs des processus d\u2019orchestration complexes sans attendre qu\u2019ils s\u2019enregistrent. Register Variable Le r\u00e9sultat de l\u2019ex\u00e9cution d\u2019une t\u00e2che dans Ansible peut \u00eatre stock\u00e9 dans une variable pour \u00eatre utilis\u00e9 dans un mod\u00e8le ou une instruction conditionnelle. Le mot-cl\u00e9 utilis\u00e9 pour d\u00e9finir la variable est appel\u00e9 register, prenant son nom de l\u2019id\u00e9e de registres dans la programmation en Assembleur. Il existe un nombre infini de noms de variables que vous pouvez utiliser pour l\u2019enregistrement. Mod\u00e8le de ressources Les modules possibles fonctionnent en termes de ressources. Par exemple, le module file s\u00e9lectionnera un fichier particulier et s\u2019assurera que les attributs de cette ressource correspondent \u00e0 un mod\u00e8le particulier. Par exemple, nous pourrions souhaiter changer le propri\u00e9taire de /etc/motd \u00e0 root s\u2019il n\u2019est pas d\u00e9j\u00e0 d\u00e9fini \u00e0 root, ou d\u00e9finir son mode \u00e0 0644 s\u2019il n\u2019est pas d\u00e9j\u00e0 d\u00e9fini \u00e0 cette valeur. Les mod\u00e8les de ressources sont idempotents, ce qui signifie que les commandes de changement ne sont ex\u00e9cut\u00e9es que si n\u00e9cessaire, et Ansible ram\u00e8nera le syst\u00e8me \u00e0 l\u2019\u00e9tat d\u00e9sir\u00e9 quel que soit l\u2019\u00e9tat r\u00e9el - plut\u00f4t que vous ayez \u00e0 lui dire comment atteindre cet \u00e9tat. R\u00f4les Les r\u00f4les sont des unit\u00e9s d\u2019organisation dans Ansible. Attribuer un r\u00f4le \u00e0 un groupe d\u2019h\u00f4tes (ou un ensemble de groupes, ou des mod\u00e8les d\u2019h\u00f4tes, etc.) implique qu\u2019ils doivent mettre en \u0153uvre un comportement sp\u00e9cifique. Un r\u00f4le peut inclure l\u2019application de certaines valeurs de variables, de certaines t\u00e2ches et de certains gestionnaires (\u201chandlers\u201d) - ou simplement une ou plusieurs de ces choses. En raison de la structure de fichier associ\u00e9e \u00e0 un r\u00f4le, les r\u00f4les deviennent des unit\u00e9s redistribuables qui vous permettent de partager leur comportement entre les playbooks - ou m\u00eame avec d\u2019autres utilisateurs. Mise \u00e0 jour continue (Rolling Updates) Le fait d\u2019adresser un certain nombre de n\u0153uds d\u2019un groupe N \u00e0 la fois pour \u00e9viter de les mettre \u00e0 jour tous en m\u00eame temps et de mettre le syst\u00e8me hors ligne. Par exemple, dans une topologie Web de 500 n\u0153uds traitant un tr\u00e8s grand volume, il peut \u00eatre raisonnable de mettre \u00e0 jour 10 ou 20 machines \u00e0 la fois, puis de passer aux 10 ou 20 suivantes une fois termin\u00e9. serial : le mot-cl\u00e9 dans un Ansible playbooks contr\u00f4le la taille du pool de mise \u00e0 jour mobile. La valeur par d\u00e9faut est d\u2019adresser la taille du lot d\u2019un seul coup, c\u2019est donc quelque chose que vous devez choisir. La configuration du syst\u00e8me d\u2019exploitation (comme s\u2019assurer que les fichiers de configuration sont corrects) n\u2019a g\u00e9n\u00e9ralement pas besoin d\u2019utiliser le mod\u00e8le de mise \u00e0 jour continue, mais peut le faire si n\u00e9cessaire. Become Ansible ne n\u00e9cessite pas de connexion root, et puisqu\u2019il est sans d\u00e9mon, il n\u2019a certainement pas besoin de d\u00e9mons de niveau root (ce qui peut \u00eatre un probl\u00e8me de s\u00e9curit\u00e9 dans les environnements sensibles). Ansible peut se connecter et effectuer de nombreuses op\u00e9rations envelopp\u00e9es dans une commande sudo, et peut travailler \u00e0 la fois avec sudo sans mot de passe et avec sudo avec mot de passe. Certaines op\u00e9rations qui ne fonctionnent pas normalement avec sudo (comme le transfert de fichiers scp) peuvent \u00eatre r\u00e9alis\u00e9es avec les modules copy, template et fetch d\u2019Ansible en mode sudo. SSH (Native) Native OpenSSH en tant que transport Ansible est sp\u00e9cifi\u00e9 avec -c ssh (ou dans un fichier de configuration, ou avec une directive dans le playbook) et peut \u00eatre utile si vous voulez vous connecter via \u201cKerberized SSH\u201d ou en utilisant les h\u00f4tes \u201cSSH jump\u201d, etc. Tags Ansible permet de baliser les ressources d\u2019un livre de jeu avec des mots-cl\u00e9s arbitraires, puis d\u2019ex\u00e9cuter uniquement les parties du livre de jeu qui correspondent \u00e0 ces mots-cl\u00e9s. Par exemple, il est possible d\u2019avoir une configuration d\u2019OS compl\u00e8te, et d\u2019avoir certaines \u00e9tapes appel\u00e9es ntp, puis d\u2019ex\u00e9cuter uniquement les \u00e9tapes ntp pour reconfigurer les informations du serveur de temps sur un h\u00f4te distant. T\u00e2che Les playbooks existent pour ex\u00e9cuter des t\u00e2ches. Les t\u00e2ches combinent une action (un module et ses arguments) avec un nom et \u00e9ventuellement d\u2019autres mots-cl\u00e9s (comme des directives de bouclage). Les gestionnaires (\u201chandlers\u201d) sont \u00e9galement des t\u00e2ches, mais il s\u2019agit d\u2019un type particulier de t\u00e2ches qui ne s\u2019ex\u00e9cutent que si elles sont notifi\u00e9es par leur nom lorsqu\u2019une t\u00e2che signale un changement sous-jacent sur un syst\u00e8me distant. Mod\u00e8les Jinja2 Ansible peut facilement transf\u00e9rer des fichiers vers des syst\u00e8mes distants mais il est souvent souhaitable de substituer des variables dans d\u2019autres fichiers. Les variables peuvent provenir du fichier d\u2019inventaire, des variables d\u2019h\u00f4te, des variables de groupe ou des faits. Les mod\u00e8les utilisent le moteur de mod\u00e8les Jinja2 et peuvent aussi inclure des constructions logiques comme des boucles et des instructions if. Transport Ansible utilise la terme \u201cConnection Plugins\u201d pour d\u00e9finir les types de transports disponibles. C\u2019est simplement de cette fa\u00e7on qu\u2019Ansible s\u2019adressera aux syst\u00e8mes g\u00e9r\u00e9s. Les transports inclus sont paramiko, ssh (utilisant OpenSSH), et local. When Une instruction conditionnelle facultative attach\u00e9e \u00e0 une t\u00e2che qui est utilis\u00e9e pour d\u00e9terminer si la t\u00e2che doit \u00eatre ex\u00e9cut\u00e9e ou non. Si l\u2019expression suivant le mot-cl\u00e9 when: \u00e9value \u00e0 faux, la t\u00e2che sera ignor\u00e9e. Vars (Variables) Contrairement aux \u201cfacts\u201d, les variables sont des noms de valeurs (il peut s\u2019agir de simples valeurs scalaires - entiers, bool\u00e9ens, cha\u00eenes de caract\u00e8res) ou des valeurs complexes (dictionnaires/mati\u00e8res, listes) qui peuvent \u00eatre utilis\u00e9es dans des mod\u00e8les et des livres de jeu. Ce sont des choses d\u00e9clar\u00e9es, et non des choses qui sont d\u00e9duites de l\u2019\u00e9tat ou de la nature actuelle du syst\u00e8me distant (ce qui est ce que sont les faits). YAML Ansible ne veut pas forcer les gens \u00e0 \u00e9crire du code en langage de programmation pour automatiser l\u2019infrastructure, donc Ansible utilise YAML pour d\u00e9finir les langages de configuration des livres de jeu et aussi les fichiers variables. YAML est agr\u00e9able parce qu\u2019il a un minimum de syntaxe et qu\u2019il est tr\u00e8s propre et facile \u00e0 lire pour les personnes. C\u2019est un bon format de donn\u00e9es pour les fichiers de configuration et les humains, mais aussi pour la lecture automatique. L\u2019utilisation de YAML par Ansible provient de la premi\u00e8re utilisation de YAML par Michael DeHaan \u00e0 l\u2019int\u00e9rieur de Cobbler vers 2006. YAML est assez populaire dans la communaut\u00e9 des langages dynamiques et le format dispose de biblioth\u00e8ques disponibles pour la s\u00e9rialisation dans de nombreux langages de programmation (Python, Perl, Ruby, etc.).","title":"Ansible"},{"location":"dev/Ansible/#ansible","text":"Here are somes ansible tips tricks","title":"Ansible"},{"location":"dev/Ansible/#pense-bete","text":"List d'argument : - -i : Sp\u00e9cifier le fichier d'inventaire - -C,--check : V\u00e9rifier la.es action.s qui sera.ont r\u00e9alis\u00e9e.s - -m : Sp\u00e9cifier le module que l'on souhaite invoquer - -k : Demander le mot de passe user - -K : Demander le mot de passe root - -b,--become : \u00c9x\u00e9cuter en tant que su ( admin)","title":"Pense b\u00eate"},{"location":"dev/Ansible/#lexique","text":"","title":"L\u00e9xique"},{"location":"dev/Ansible/#action","text":"Une action fait partie d\u2019une t\u00e2che qui pr\u00e9cise les modules \u00e0 ex\u00e9cuter et les arguments \u00e0 transmettre \u00e0 ce module. Chaque t\u00e2che ne peut avoir qu\u2019une seule action, mais elle peut aussi avoir d\u2019autres param\u00e8tres.","title":"Action"},{"location":"dev/Ansible/#ad-hoc","text":"D\u00e9signe l\u2019ex\u00e9cution d\u2019Ansible pour ex\u00e9cuter une commande rapide, en utilisant /usr/bin/ansible, plut\u00f4t que le langage d\u2019orchestration, qui est /usr/bin/ansible-playbook. Un exemple de commande ad hoc pourrait \u00eatre le red\u00e9marrage de 50 machines dans votre infrastructure. Tout ce que vous pouvez faire ad hoc peut \u00eatre accompli en \u00e9crivant un livre de jeu et les livres de jeu peuvent \u00e9galement cumuler beaucoup d\u2019autres op\u00e9rations ensemble.","title":"Ad Hoc"},{"location":"dev/Ansible/#async","text":"D\u00e9signe une t\u00e2che qui est configur\u00e9e pour \u00eatre ex\u00e9cut\u00e9e en arri\u00e8re-plan plut\u00f4t que d\u2019attendre l\u2019ach\u00e8vement. Si vous avez un long processus qui durerait plus longtemps que le d\u00e9lai d\u2019attente SSH, il serait logique de lancer cette t\u00e2che en mode asynchrone. Les modes Asynchrones peuvent \u00eatre interrog\u00e9s toutes les secondes ou peuvent \u00eatre configur\u00e9s pour \u201ctirer et oublier\u201d, auquel cas Ansible ne v\u00e9rifiera m\u00eame pas \u00e0 nouveau la t\u00e2che ; il la d\u00e9clenchera simplement et passera aux \u00e9tapes suivantes. Les modes asynchrones fonctionnent avec /usr/bin/ansible et /usr/bin/ansible-playbook.","title":"Async"},{"location":"dev/Ansible/#callback-plugin","text":"D\u00e9signe un code \u00e9crit par l\u2019utilisateur qui peut intercepter les r\u00e9sultats d\u2019Ansible et en faire quelque chose. Quelques exemples fournis dans le projet GitHub permettent d\u2019effectuer des enregistrements personnalis\u00e9s, d\u2019envoyer des courriels ou m\u00eame de jouer des effets sonores.","title":"Callback Plugin"},{"location":"dev/Ansible/#check-mode","text":"D\u00e9signe l\u2019ex\u00e9cution d\u2019Ansible avec l\u2019option --check, qui n\u2019apporte aucune modification sur les syst\u00e8mes distants, mais n\u2019affiche que les modifications qui peuvent survenir si la commande s\u2019ex\u00e9cute sans ce drapeau. Ceci est analogue aux modes dits \u201cmarche \u00e0 vide\u201d dans d\u2019autres syst\u00e8mes, mais l\u2019utilisateur doit \u00eatre averti que ceci ne tient pas compte des d\u00e9faillances inattendues des commandes ou des effets en cascade (ce qui est vrai pour des modes similaires dans d\u2019autres syst\u00e8mes). Utilisez ceci pour vous faire une id\u00e9e de ce qui pourrait arriver, mais ne le remplacez pas par un bon environnement de mise en sc\u00e8ne.","title":"Check Mode"},{"location":"dev/Ansible/#plugin-de-connexion","text":"Par d\u00e9faut, Ansible communique avec les machines distantes via des biblioth\u00e8ques enfichables. Ansible supporte OpenSSH (SSH (Native)) ou une impl\u00e9mentation Python appel\u00e9e paramiko. OpenSSH est pr\u00e9f\u00e9r\u00e9 si vous utilisez une version r\u00e9cente, et permet \u00e9galement certaines fonctionnalit\u00e9s comme Kerberos et les h\u00f4tes de saut. Ceci est couvert dans la section Mise en route. Il existe aussi d\u2019autres types de connexion comme le mode acc\u00e9l\u00e9r\u00e9, qui doit \u00eatre amorc\u00e9 sur l\u2019un des types de connexion bas\u00e9s sur SSH mais qui est tr\u00e8s rapide, et le mode local, qui agit sur le syst\u00e8me local. Les utilisateurs peuvent \u00e9galement \u00e9crire leurs propres plugins de connexion.","title":"Plugin de connexion"},{"location":"dev/Ansible/#conditionals","text":"Un conditionnel est une expression qui \u00e9value \u00e0 vrai ou faux qui d\u00e9cide si une t\u00e2che donn\u00e9e est ex\u00e9cut\u00e9e sur une machine donn\u00e9e ou non. Les conditionnels d\u2019Ansible sont aliment\u00e9s par l\u2019instruction \u2018when:\u2019.","title":"Conditionals"},{"location":"dev/Ansible/#declaratif","text":"Une approche pour r\u00e9aliser une t\u00e2che qui utilise une description de l\u2019\u00e9tat final plut\u00f4t qu\u2019une description de la s\u00e9quence des \u00e9tapes n\u00e9cessaires pour atteindre cet \u00e9tat. Pour un exemple du monde r\u00e9el, une sp\u00e9cification d\u00e9clarative d\u2019une t\u00e2che serait : \u201cmettez-moi en Californie\u201d. Selon votre emplacement actuel, la s\u00e9quence des \u00e9tapes pour vous rendre en Californie peut varier, et si vous \u00eates d\u00e9j\u00e0 en Californie, rien ne doit \u00eatre fait du tout. Les Ressources d\u2019Ansible sont d\u00e9claratives ; elles d\u00e9terminent les \u00e9tapes n\u00e9cessaires pour atteindre l\u2019\u00e9tat final. Il vous permet \u00e9galement de savoir si des mesures doivent \u00eatre prises ou non pour arriver \u00e0 l\u2019\u00e9tat final.","title":"D\u00e9claratif"},{"location":"dev/Ansible/#mode-diff","text":"Un drapeau --diff peut \u00eatre pass\u00e9 \u00e0 Ansible pour montrer ce qui a chang\u00e9 sur les modules qui le supportent. Vous pouvez le combiner avec --check pour obtenir un bon \u201ctest\u201d. Les diffs de fichiers sont normalement dans un format de diff unifi\u00e9.","title":"Mode Diff"},{"location":"dev/Ansible/#executor","text":"Un composant logiciel de base d\u2019Ansible qui est la puissance derri\u00e8re /usr/bin/ansible directement - et correspond \u00e0 l\u2019invocation de chaque t\u00e2che dans un playbook. L\u2019ex\u00e9cuteur est quelque chose dont les d\u00e9veloppeurs d\u2019Ansible peuvent parler, mais ce n\u2019est pas vraiment dans le vocabulaire de l\u2019utilisateur commun.","title":"Executor"},{"location":"dev/Ansible/#facts","text":"Les \u201cfacts\u201d sont simplement des choses que l\u2019on d\u00e9couvre au sujet des n\u0153uds distants. Bien qu\u2019ils puissent \u00eatre utilis\u00e9s dans des livres de jeu et des mod\u00e8les tout comme les variables, les \u201cfacts\u201d sont des choses qui sont d\u00e9duites, plut\u00f4t que d\u00e9finies. Les \u201cfacts\u201d sont automatiquement d\u00e9couverts par Ansible lors de l\u2019ex\u00e9cution d\u2019une lecture de livre de jeu en ex\u00e9cutant le module de configuration interne sur les n\u0153uds distants. Il n\u2019est jamais n\u00e9cessaire d\u2019appeler le module \u201csetup\u201d explicitement, il s\u2019ex\u00e9cute simplement, mais il peut \u00eatre d\u00e9sactiv\u00e9 pour gagner du temps s\u2019il n\u2019est pas n\u00e9cessaire ou vous pouvez dire \u00e0 ansible de ne collecter qu\u2019un sous-ensemble des faits complets via l\u2019option gather_subset:. Pour la commodit\u00e9 des utilisateurs qui passent d\u2019autres syst\u00e8mes de gestion de configuration, le module factuel tirera \u00e9galement des faits des outils ohai et facter s\u2019ils sont install\u00e9s. Ce sont des biblioth\u00e8ques de \u201cfacts\u201d de Chef et Puppet, respectivement. (Ceux-ci peuvent aussi \u00eatre d\u00e9sactiv\u00e9s via gather_subset:)","title":"Facts"},{"location":"dev/Ansible/#plugin-de-filtrage","text":"Un plugin de filtrage est quelque chose que la plupart des utilisateurs n\u2019auront jamais besoin de comprendre. Ceux-ci permettent la cr\u00e9ation de nouveaux filtres Jinja2, qui ne sont plus ou moins utiles qu\u2019aux personnes qui savent ce que sont les filtres Jinja2. Si vous en avez besoin, vous pouvez apprendre \u00e0 les \u00e9crire dans la section documentation de l\u2019API.","title":"Plugin de filtrage"},{"location":"dev/Ansible/#forks","text":"Il est possible de dialoguer en parall\u00e8le avec des n\u0153uds distants et de d\u00e9finir le niveau de parall\u00e9lisme soit en passant --forks \u00e0 la commande ansible, soit en \u00e9ditant la valeur par d\u00e9faut dans un fichier de configuration. La valeur par d\u00e9faut est une fourche \u00e0 cinq (5) forks tr\u00e8s conservatrice. Si vous avez beaucoup de RAM, vous pouvez facilement r\u00e9gler cette valeur \u00e0 une valeur comme 50 pour un parall\u00e9lisme accru.","title":"Forks"},{"location":"dev/Ansible/#gather-facts-booleen","text":"Les \u201cfacts\u201d ont \u00e9t\u00e9 mentionn\u00e9s ci-dessus. Parfois, lors de l\u2019ex\u00e9cution d\u2019un livre de jeu multi-jeux, il est souhaitable d\u2019avoir quelques jeux qui ne collectent pas de \u201cfacts\u201d car ils n\u2019en n\u2019ont pas besoin. D\u00e9finir gather_facts: False dans un jeu permet de sauter cette collecte implicite de faits.","title":"Gather Facts (bool\u00e9en)"},{"location":"dev/Ansible/#globbing","text":"Le \u201cGlobbing\u201d est un moyen de s\u00e9lectionner un grand nombre d\u2019h\u00f4tes en se basant sur des caract\u00e8res g\u00e9n\u00e9riques, plut\u00f4t que de le faire sur le nom de l\u2019h\u00f4te en particulier, ou le nom du groupe dans lequel ils se trouvent. Par exemple, il est possible de s\u00e9lectionner ww* pour faire correspondre tous les h\u00f4tes en commen\u00e7ant par www. Ce concept est tir\u00e9 directement de Func, l\u2019un des projets pr\u00e9c\u00e9dents de Michael DeHaan (Ansible Founder).","title":"Globbing"},{"location":"dev/Ansible/#groupe-dinventaire","text":"Un groupe d\u2019inventaire se compose de plusieurs h\u00f4tes assign\u00e9s \u00e0 un pool qui peuvent \u00eatre facilement cibl\u00e9s ensemble, ainsi que de variables donn\u00e9es qu\u2019ils partagent en commun.","title":"Groupe d\u2019inventaire"},{"location":"dev/Ansible/#group-vars","text":"Les dossier group_vars/ comprend des fichiers qui vivent dans un r\u00e9pertoire \u00e0 c\u00f4t\u00e9 d\u2019un fichier d\u2019inventaire, avec un nom de fichier facultatif nomm\u00e9 du nom de chaque groupe. C\u2019est un endroit pratique pour placer les variables qui sont fournies \u00e0 un groupe donn\u00e9, en particulier les structures de donn\u00e9es complexes, de sorte que ces variables n\u2019ont pas \u00e0 \u00eatre int\u00e9gr\u00e9es dans le fichier d\u2019inventaire ou dans le livre de jeu.","title":"Group Vars"},{"location":"dev/Ansible/#handlers","text":"Les \u201cHandlers\u201d sont comme les t\u00e2ches r\u00e9guli\u00e8res dans un playbook Ansible (voir T\u00e2ches) mais ne sont ex\u00e9cut\u00e9s que si la t\u00e2che contient une directive notify et \u00e9galement si elle indique qu\u2019elle a chang\u00e9 quelque chose. Par exemple, si un fichier de configuration est modifi\u00e9, la t\u00e2che faisant r\u00e9f\u00e9rence \u00e0 l\u2019op\u00e9ration de mod\u00e9lisation du fichier de configuration peut avertir un gestionnaire (\u201chandler\u201d) de red\u00e9marrage du service. Les gestionnaires peuvent \u00eatre utilis\u00e9s \u00e0 d\u2019autres fins que le red\u00e9marrage du service, mais le red\u00e9marrage du service est l\u2019utilisation la plus courante.","title":"Handlers"},{"location":"dev/Ansible/#hote-host","text":"Un h\u00f4te est simplement une machine distante qu\u2019Ansible g\u00e8re. Des variables individuelles peuvent leur \u00eatre affect\u00e9es et elles peuvent \u00e9galement \u00eatre organis\u00e9es en groupes. Tous les h\u00f4tes ont un nom d\u2019acc\u00e8s (adresse IP ou nom de domaine) et, facultativement, un num\u00e9ro de port, s\u2019ils ne sont pas accessibles sur le port SSH par d\u00e9faut.","title":"H\u00f4te (Host)"},{"location":"dev/Ansible/#host-specifier","text":"Chaque jeu dans Ansible applique une s\u00e9rie de t\u00e2ches (qui d\u00e9finissent le r\u00f4le, le but ou les ordres d\u2019un syst\u00e8me) \u00e0 un ensemble de syst\u00e8mes. hosts: est la directive dans chaque jeu qui est souvent appel\u00e9e le sp\u00e9cificateur hosts et qui configure ce comportement. Il peut s\u00e9lectionner un syst\u00e8me, plusieurs syst\u00e8mes, un ou plusieurs groupes, ou m\u00eame certains h\u00f4tes qui sont dans un groupe et explicitement pas dans un autre.","title":"Host Specifier"},{"location":"dev/Ansible/#host-vars","text":"Tout comme les \u201cGroup Vars\u201d, un r\u00e9pertoire \u00e0 c\u00f4t\u00e9 du fichier d\u2019inventaire nomm\u00e9 host_vars/ peut contenir un fichier nomm\u00e9 d\u2019apr\u00e8s chaque nom d\u2019h\u00f4te du fichier d\u2019inventaire, au format YAML. Ceci fournit un endroit pratique pour assigner des variables \u00e0 l\u2019h\u00f4te sans avoir \u00e0 les int\u00e9grer dans le fichier d\u2019inventaire. Le fichier \u201cHost Vars\u201d peut \u00e9galement \u00eatre utilis\u00e9 pour d\u00e9finir des structures de donn\u00e9es complexes qui ne peuvent pas \u00eatre repr\u00e9sent\u00e9es dans le fichier d\u2019inventaire.","title":"Host Vars"},{"location":"dev/Ansible/#idempotence","text":"Une op\u00e9ration est idempotente si le r\u00e9sultat de son ex\u00e9cution unique est exactement le m\u00eame que le r\u00e9sultat de son ex\u00e9cution r\u00e9p\u00e9t\u00e9e sans aucune action interm\u00e9diaire.","title":"Idempotence"},{"location":"dev/Ansible/#includes","text":"L\u2019id\u00e9e que les fichiers de livre de jeu (qui ne sont rien de plus que des listes de jeux) peuvent inclure d\u2019autres listes de jeux, et les listes de t\u00e2ches peuvent \u00eatre externalis\u00e9es dans des listes de t\u00e2ches contenues dans d\u2019autres fichiers, et de m\u00eame avec des \u201chandlers\u201d. Les \u201cIncludes\u201d peuvent \u00eatre param\u00e9tr\u00e9s, ce qui signifie que le fichier charg\u00e9 en m\u00e9moire peut passer des variables. Par exemple, un jeu inclus pour cr\u00e9er un blog WordPress peut prendre un param\u00e8tre appel\u00e9 utilisateur et ce jeu peut \u00eatre inclus plus d\u2019une fois pour cr\u00e9er un blog pour alice et bob.","title":"Includes"},{"location":"dev/Ansible/#inventaire","text":"Un fichier (par d\u00e9faut, Ansible utilise un format INI simple) qui d\u00e9crit les h\u00f4tes et les groupes dans Ansible. L\u2019inventaire peut \u00e9galement \u00eatre fourni via un script d\u2019inventaire (parfois appel\u00e9 \u201cExternal Inventory Script\u201d).","title":"Inventaire"},{"location":"dev/Ansible/#script-dinventaire","text":"Un programme tr\u00e8s simple (ou compliqu\u00e9) qui recherche des h\u00f4tes, leur appartenance \u00e0 un groupe d\u2019h\u00f4tes et des informations variables \u00e0 partir d\u2019une ressource externe - que ce soit une base de donn\u00e9es SQL, une solution CMDB, ou quelque chose comme LDAP. Ce concept a \u00e9t\u00e9 adapt\u00e9 de Puppet (o\u00f9 il est appel\u00e9 \u201cExternal Nodes Classifier\u201d) et fonctionne plus ou moins exactement de la m\u00eame mani\u00e8re.","title":"Script d\u2019inventaire"},{"location":"dev/Ansible/#jinja2","text":"Jinja2 est le langage de template pr\u00e9f\u00e9r\u00e9 du module de template d\u2019Ansible. C\u2019est un langage de template Python tr\u00e8s simple, g\u00e9n\u00e9ralement lisible et facile \u00e0 \u00e9crire.","title":"Jinja2"},{"location":"dev/Ansible/#json","text":"Ansible utilise JSON pour les donn\u00e9es de retour des modules distants. Cela permet aux modules d\u2019\u00eatre \u00e9crits dans n\u2019importe quel langage, pas seulement en Python.","title":"JSON"},{"location":"dev/Ansible/#lazy-evaluation","text":"En g\u00e9n\u00e9ral, Ansible \u00e9value toutes les variables du contenu du livre de jeu \u00e0 la derni\u00e8re seconde, ce qui signifie que si vous d\u00e9finissez une structure de donn\u00e9es, cette structure de donn\u00e9es elle-m\u00eame peut d\u00e9finir des valeurs de variables en son sein, et tout \u201cfonctionne\u201d comme vous pouvez vous y attendre. Cela signifie \u00e9galement que les cha\u00eenes de caract\u00e8res variables peuvent inclure d\u2019autres variables \u00e0 l\u2019int\u00e9rieur de ces cha\u00eenes.","title":"Lazy Evaluation"},{"location":"dev/Ansible/#library","text":"Une collection de modules mis \u00e0 disposition de /usr/bin/ansible ou d\u2019un playbook Ansible.","title":"Library"},{"location":"dev/Ansible/#limit-groups","text":"En passant --limit somegroup aux commandes ansible ou ansible-playbook, leur ex\u00e9cution peut \u00eatre limit\u00e9e \u00e0 un sous-ensemble d\u2019h\u00f4tes. Par exemple, ceci peut \u00eatre utilis\u00e9 pour ex\u00e9cuter un livre de jeu qui cible normalement un ensemble entier de serveurs vers un serveur particulier.","title":"Limit Groups"},{"location":"dev/Ansible/#local-action","text":"Une directive local_action dans un livre de jeu ciblant des machines distantes signifie que l\u2019\u00e9tape donn\u00e9e se produira effectivement sur la machine locale, mais que la variable {{ ansible_hostname }} peut \u00eatre pass\u00e9e pour r\u00e9f\u00e9rencer le nom d\u2019h\u00f4te distant auquel elle fait r\u00e9f\u00e9rence. Ceci peut \u00eatre utilis\u00e9 pour d\u00e9clencher, par exemple, une op\u00e9ration rsync ou encore approvisionner des h\u00f4tes d\u2019inventaire qui n\u2019existent pas d\u00e9j\u00e0 aupr\u00e8s d\u2019un fournisseur en nuage.","title":"Local Action"},{"location":"dev/Ansible/#local-connection","text":"En utilisant la connexion: local dans un jeu, ou en passant -c local \u00e0 la commande /usr/bin/ansible, cela indique que nous g\u00e9rons l\u2019h\u00f4te local et non une machine distante.","title":"Local Connection"},{"location":"dev/Ansible/#plugin-de-recherche","text":"Un plugin de recherche est un moyen d\u2019obtenir des donn\u00e9es dans Ansible \u00e0 partir du monde ext\u00e9rieur. Les plugins de recherche sont une extension de Jinja2 et peuvent \u00eatre appel\u00e9s \u00e0 partir des mod\u00e8les, par exemple, {{research('file','/path/to/file') }}.","title":"Plugin de recherche"},{"location":"dev/Ansible/#loops","text":"Ansible n\u2019est pas un langage de programmation. Il pr\u00e9f\u00e8re \u00eatre plus d\u00e9claratif, bien que diverses constructions comme la boucle permettent de r\u00e9p\u00e9ter une t\u00e2che particuli\u00e8re pour plusieurs \u00e9l\u00e9ments d\u2019une liste. Certains modules, comme yum et apt, prennent en fait les listes directement, et peuvent installer tous les paquets donn\u00e9s dans ces listes en une seule transaction, ce qui acc\u00e9l\u00e8re consid\u00e9rablement le temps total de configuration, de sorte qu\u2019ils peuvent \u00eatre utilis\u00e9s sans boucle.","title":"Loops"},{"location":"dev/Ansible/#modules","text":"Les modules sont les unit\u00e9s de travail qu\u2019Ansible exp\u00e9die aux machines distantes. Les modules sont lanc\u00e9s par /usr/bin/ansible ou /usr/bin/ansible-playbook (o\u00f9 plusieurs t\u00e2ches utilisent beaucoup de modules diff\u00e9rents en m\u00eame temps). Les modules peuvent \u00eatre impl\u00e9ment\u00e9s dans n\u2019importe quel langage, y compris Perl, Bash, ou Ruby - mais peuvent tirer parti d\u2019un code de biblioth\u00e8que communautaire utile si il est \u00e9crit en Python. Les modules n\u2019ont qu\u2019\u00e0 retourner JSON. Une fois que les modules sont ex\u00e9cut\u00e9s sur des machines distantes, ils sont supprim\u00e9s, de sorte qu\u2019aucun d\u00e9mon de longue dur\u00e9e n\u2019est utilis\u00e9. Ansible fait r\u00e9f\u00e9rence \u00e0 la collection de modules disponibles en tant que biblioth\u00e8que.","title":"Modules"},{"location":"dev/Ansible/#multi-tier","text":"Multi-Tier est le concept selon lequel les syst\u00e8mes informatiques ne sont pas g\u00e9r\u00e9s un syst\u00e8me \u00e0 la fois, mais par des interactions entre plusieurs syst\u00e8mes et des groupes de syst\u00e8mes dans des ordres bien d\u00e9finis. Par exemple, un serveur Web peut avoir besoin d\u2019\u00eatre mis \u00e0 jour avant un serveur de base de donn\u00e9es et des \u00e9l\u00e9ments sur le serveur Web peuvent avoir besoin d\u2019\u00eatre mis \u00e0 jour apr\u00e8s. Ansible mod\u00e9lise l\u2019ensemble des topologies et des workflows informatiques plut\u00f4t que d\u2019envisager la configuration dans une perspective \u201cun syst\u00e8me \u00e0 la fois\u201d.","title":"Multi-Tier"},{"location":"dev/Ansible/#notify","text":"L\u2019acte d\u2019une t\u00e2che enregistrant un \u00e9v\u00e9nement de changement et informant un gestionnaire (\u201chandler\u201d) de t\u00e2che qu\u2019une autre action doit \u00eatre ex\u00e9cut\u00e9e \u00e0 la fin du jeu. Si un \u201chandler\u201d est notifi\u00e9 par plusieurs t\u00e2ches, il ne sera ex\u00e9cut\u00e9 qu\u2019une seule fois. Les gestionnaires sont ex\u00e9cut\u00e9s dans l\u2019ordre dans lequel ils sont list\u00e9s, et non dans l\u2019ordre dans lequel ils sont notifi\u00e9s.","title":"Notify"},{"location":"dev/Ansible/#orchestration","text":"De nombreux syst\u00e8mes logiciels d\u2019automatisation utilisent ce mot pour signifier diff\u00e9rentes choses. Ansible l\u2019utilise comme chef d\u2019orchestre pour diriger un orchestre. L\u2019architecture d\u2019un centre de donn\u00e9es ou d\u2019un cloud est pleine de nombreux syst\u00e8mes, jouant de nombreux r\u00f4les - serveurs web, serveurs de bases de donn\u00e9es, peut-\u00eatre des \u00e9quilibreurs de charge, des syst\u00e8mes de surveillance, syst\u00e8mes d\u2019int\u00e9gration continue, etc. Dans l\u2019ex\u00e9cution de tout processus, il est n\u00e9cessaire de toucher les syst\u00e8mes avec des commandes particuli\u00e8res, souvent pour simuler des mises-\u00e0-jour continues ou pour d\u00e9ployer le logiciel correctement. Certains syst\u00e8mes peuvent effectuer certaines \u00e9tapes, puis d\u2019autres d\u2019autres \u00e9tapes, puis les syst\u00e8mes pr\u00e9c\u00e9dents d\u00e9j\u00e0 trait\u00e9s peuvent avoir besoin d\u2019effectuer d\u2019autres \u00e9tapes. En cours de route, il peut \u00eatre n\u00e9cessaire d\u2019envoyer des courriels ou de communiquer avec des services Web. Une orchestration possible consiste \u00e0 mod\u00e9liser ce genre de processus.","title":"Orchestration"},{"location":"dev/Ansible/#paramiko","text":"Par d\u00e9faut, Ansible g\u00e8re les machines via SSH. La biblioth\u00e8que qu\u2019Ansible utilise par d\u00e9faut pour ce faire est une biblioth\u00e8que aliment\u00e9e par Python appel\u00e9e paramiko. La librairie paramiko est g\u00e9n\u00e9ralement rapide et facile \u00e0 g\u00e9rer, bien que les utilisateurs d\u00e9sirant la prise en charge de Kerberos ou de Jump Host puissent passer \u00e0 un binaire SSH natif tel que OpenSSH en sp\u00e9cifiant le type de connexion dans leurs playbooks, ou en utilisant le drapeau -c ssh.","title":"Paramiko"},{"location":"dev/Ansible/#livres-de-jeux","text":"Les Livres de jeux (playbooks) sont la langue par laquelle Ansible orchestre, configure, administre ou d\u00e9ploie les syst\u00e8mes. On les appelle en partie des playbooks parce que c\u2019est une analogie sportive, et c\u2019est cens\u00e9 \u00eatre amusant de les utiliser. Ce ne sont pas des cahiers d\u2019exercices :)","title":"Livres de jeux"},{"location":"dev/Ansible/#jeux-plays","text":"Un livre de jeu est une liste de jeux. Un jeu est au minimum une correspondance entre un ensemble d\u2019h\u00f4tes s\u00e9lectionn\u00e9s par un sp\u00e9cificateur d\u2019h\u00f4te (g\u00e9n\u00e9ralement choisis par des groupes mais parfois par des globes de nom d\u2019h\u00f4te) et les t\u00e2ches qui s\u2019ex\u00e9cutent sur ces h\u00f4tes pour d\u00e9finir le r\u00f4le que ces syst\u00e8mes vont jouer. Il peut y avoir un ou plusieurs jeu dans un livre de jeu.","title":"Jeux (Plays)"},{"location":"dev/Ansible/#mode-pull-traction","text":"Par d\u00e9faut, Ansible fonctionne en mode \u201cpush\u201d, ce qui lui permet de contr\u00f4ler tr\u00e8s finement le moment pendant lequel il parle \u00e0 chaque syst\u00e8me. Le mode Pull est pr\u00e9vu lorsque vous pr\u00e9f\u00e9rez que les n\u0153uds v\u00e9rifient un livre de jeu toutes les N minutes sur un horaire particulier. Il utilise un programme appel\u00e9 ansible-pull et peut \u00e9galement \u00eatre configur\u00e9 (ou reconfigur\u00e9) \u00e0 l\u2019aide d\u2019un playbook en mode \u201cpush\u201d. La plupart des utilisateurs d\u2019Ansible utilisent le mode \u201cpush\u201d, mais le mode \u201cpull\u201d est inclus pour la vari\u00e9t\u00e9 et le fait d\u2019avoir des alternatives. ansible-pull fonctionne en v\u00e9rifiant les commandes de configuration git avec un crontab puis en g\u00e9rant la machine localement, en utilisant le plugin de connexion local.","title":"Mode Pull (traction)"},{"location":"dev/Ansible/#mode-push","text":"Le mode \u201cPush\u201d est le mode par d\u00e9faut d\u2019Ansible. En fait, ce n\u2019est pas vraiment un mode du tout - c\u2019est juste la mani\u00e8re dont Ansible fonctionne quand on n\u2019y pense pas. Le mode \u201cpush\u201d permet \u00e0 Ansible d\u2019\u00eatre finement granul\u00e9 et de conduire les n\u0153uds \u00e0 traveNurs des processus d\u2019orchestration complexes sans attendre qu\u2019ils s\u2019enregistrent.","title":"Mode Push"},{"location":"dev/Ansible/#register-variable","text":"Le r\u00e9sultat de l\u2019ex\u00e9cution d\u2019une t\u00e2che dans Ansible peut \u00eatre stock\u00e9 dans une variable pour \u00eatre utilis\u00e9 dans un mod\u00e8le ou une instruction conditionnelle. Le mot-cl\u00e9 utilis\u00e9 pour d\u00e9finir la variable est appel\u00e9 register, prenant son nom de l\u2019id\u00e9e de registres dans la programmation en Assembleur. Il existe un nombre infini de noms de variables que vous pouvez utiliser pour l\u2019enregistrement.","title":"Register Variable"},{"location":"dev/Ansible/#modele-de-ressources","text":"Les modules possibles fonctionnent en termes de ressources. Par exemple, le module file s\u00e9lectionnera un fichier particulier et s\u2019assurera que les attributs de cette ressource correspondent \u00e0 un mod\u00e8le particulier. Par exemple, nous pourrions souhaiter changer le propri\u00e9taire de /etc/motd \u00e0 root s\u2019il n\u2019est pas d\u00e9j\u00e0 d\u00e9fini \u00e0 root, ou d\u00e9finir son mode \u00e0 0644 s\u2019il n\u2019est pas d\u00e9j\u00e0 d\u00e9fini \u00e0 cette valeur. Les mod\u00e8les de ressources sont idempotents, ce qui signifie que les commandes de changement ne sont ex\u00e9cut\u00e9es que si n\u00e9cessaire, et Ansible ram\u00e8nera le syst\u00e8me \u00e0 l\u2019\u00e9tat d\u00e9sir\u00e9 quel que soit l\u2019\u00e9tat r\u00e9el - plut\u00f4t que vous ayez \u00e0 lui dire comment atteindre cet \u00e9tat.","title":"Mod\u00e8le de ressources"},{"location":"dev/Ansible/#roles","text":"Les r\u00f4les sont des unit\u00e9s d\u2019organisation dans Ansible. Attribuer un r\u00f4le \u00e0 un groupe d\u2019h\u00f4tes (ou un ensemble de groupes, ou des mod\u00e8les d\u2019h\u00f4tes, etc.) implique qu\u2019ils doivent mettre en \u0153uvre un comportement sp\u00e9cifique. Un r\u00f4le peut inclure l\u2019application de certaines valeurs de variables, de certaines t\u00e2ches et de certains gestionnaires (\u201chandlers\u201d) - ou simplement une ou plusieurs de ces choses. En raison de la structure de fichier associ\u00e9e \u00e0 un r\u00f4le, les r\u00f4les deviennent des unit\u00e9s redistribuables qui vous permettent de partager leur comportement entre les playbooks - ou m\u00eame avec d\u2019autres utilisateurs.","title":"R\u00f4les"},{"location":"dev/Ansible/#mise-a-jour-continue-rolling-updates","text":"Le fait d\u2019adresser un certain nombre de n\u0153uds d\u2019un groupe N \u00e0 la fois pour \u00e9viter de les mettre \u00e0 jour tous en m\u00eame temps et de mettre le syst\u00e8me hors ligne. Par exemple, dans une topologie Web de 500 n\u0153uds traitant un tr\u00e8s grand volume, il peut \u00eatre raisonnable de mettre \u00e0 jour 10 ou 20 machines \u00e0 la fois, puis de passer aux 10 ou 20 suivantes une fois termin\u00e9. serial : le mot-cl\u00e9 dans un Ansible playbooks contr\u00f4le la taille du pool de mise \u00e0 jour mobile. La valeur par d\u00e9faut est d\u2019adresser la taille du lot d\u2019un seul coup, c\u2019est donc quelque chose que vous devez choisir. La configuration du syst\u00e8me d\u2019exploitation (comme s\u2019assurer que les fichiers de configuration sont corrects) n\u2019a g\u00e9n\u00e9ralement pas besoin d\u2019utiliser le mod\u00e8le de mise \u00e0 jour continue, mais peut le faire si n\u00e9cessaire.","title":"Mise \u00e0 jour continue (Rolling Updates)"},{"location":"dev/Ansible/#become","text":"Ansible ne n\u00e9cessite pas de connexion root, et puisqu\u2019il est sans d\u00e9mon, il n\u2019a certainement pas besoin de d\u00e9mons de niveau root (ce qui peut \u00eatre un probl\u00e8me de s\u00e9curit\u00e9 dans les environnements sensibles). Ansible peut se connecter et effectuer de nombreuses op\u00e9rations envelopp\u00e9es dans une commande sudo, et peut travailler \u00e0 la fois avec sudo sans mot de passe et avec sudo avec mot de passe. Certaines op\u00e9rations qui ne fonctionnent pas normalement avec sudo (comme le transfert de fichiers scp) peuvent \u00eatre r\u00e9alis\u00e9es avec les modules copy, template et fetch d\u2019Ansible en mode sudo.","title":"Become"},{"location":"dev/Ansible/#ssh-native","text":"Native OpenSSH en tant que transport Ansible est sp\u00e9cifi\u00e9 avec -c ssh (ou dans un fichier de configuration, ou avec une directive dans le playbook) et peut \u00eatre utile si vous voulez vous connecter via \u201cKerberized SSH\u201d ou en utilisant les h\u00f4tes \u201cSSH jump\u201d, etc.","title":"SSH (Native)"},{"location":"dev/Ansible/#tags","text":"Ansible permet de baliser les ressources d\u2019un livre de jeu avec des mots-cl\u00e9s arbitraires, puis d\u2019ex\u00e9cuter uniquement les parties du livre de jeu qui correspondent \u00e0 ces mots-cl\u00e9s. Par exemple, il est possible d\u2019avoir une configuration d\u2019OS compl\u00e8te, et d\u2019avoir certaines \u00e9tapes appel\u00e9es ntp, puis d\u2019ex\u00e9cuter uniquement les \u00e9tapes ntp pour reconfigurer les informations du serveur de temps sur un h\u00f4te distant.","title":"Tags"},{"location":"dev/Ansible/#tache","text":"Les playbooks existent pour ex\u00e9cuter des t\u00e2ches. Les t\u00e2ches combinent une action (un module et ses arguments) avec un nom et \u00e9ventuellement d\u2019autres mots-cl\u00e9s (comme des directives de bouclage). Les gestionnaires (\u201chandlers\u201d) sont \u00e9galement des t\u00e2ches, mais il s\u2019agit d\u2019un type particulier de t\u00e2ches qui ne s\u2019ex\u00e9cutent que si elles sont notifi\u00e9es par leur nom lorsqu\u2019une t\u00e2che signale un changement sous-jacent sur un syst\u00e8me distant.","title":"T\u00e2che"},{"location":"dev/Ansible/#modeles-jinja2","text":"Ansible peut facilement transf\u00e9rer des fichiers vers des syst\u00e8mes distants mais il est souvent souhaitable de substituer des variables dans d\u2019autres fichiers. Les variables peuvent provenir du fichier d\u2019inventaire, des variables d\u2019h\u00f4te, des variables de groupe ou des faits. Les mod\u00e8les utilisent le moteur de mod\u00e8les Jinja2 et peuvent aussi inclure des constructions logiques comme des boucles et des instructions if.","title":"Mod\u00e8les Jinja2"},{"location":"dev/Ansible/#transport","text":"Ansible utilise la terme \u201cConnection Plugins\u201d pour d\u00e9finir les types de transports disponibles. C\u2019est simplement de cette fa\u00e7on qu\u2019Ansible s\u2019adressera aux syst\u00e8mes g\u00e9r\u00e9s. Les transports inclus sont paramiko, ssh (utilisant OpenSSH), et local.","title":"Transport"},{"location":"dev/Ansible/#when","text":"Une instruction conditionnelle facultative attach\u00e9e \u00e0 une t\u00e2che qui est utilis\u00e9e pour d\u00e9terminer si la t\u00e2che doit \u00eatre ex\u00e9cut\u00e9e ou non. Si l\u2019expression suivant le mot-cl\u00e9 when: \u00e9value \u00e0 faux, la t\u00e2che sera ignor\u00e9e.","title":"When"},{"location":"dev/Ansible/#vars-variables","text":"Contrairement aux \u201cfacts\u201d, les variables sont des noms de valeurs (il peut s\u2019agir de simples valeurs scalaires - entiers, bool\u00e9ens, cha\u00eenes de caract\u00e8res) ou des valeurs complexes (dictionnaires/mati\u00e8res, listes) qui peuvent \u00eatre utilis\u00e9es dans des mod\u00e8les et des livres de jeu. Ce sont des choses d\u00e9clar\u00e9es, et non des choses qui sont d\u00e9duites de l\u2019\u00e9tat ou de la nature actuelle du syst\u00e8me distant (ce qui est ce que sont les faits).","title":"Vars (Variables)"},{"location":"dev/Ansible/#yaml","text":"Ansible ne veut pas forcer les gens \u00e0 \u00e9crire du code en langage de programmation pour automatiser l\u2019infrastructure, donc Ansible utilise YAML pour d\u00e9finir les langages de configuration des livres de jeu et aussi les fichiers variables. YAML est agr\u00e9able parce qu\u2019il a un minimum de syntaxe et qu\u2019il est tr\u00e8s propre et facile \u00e0 lire pour les personnes. C\u2019est un bon format de donn\u00e9es pour les fichiers de configuration et les humains, mais aussi pour la lecture automatique. L\u2019utilisation de YAML par Ansible provient de la premi\u00e8re utilisation de YAML par Michael DeHaan \u00e0 l\u2019int\u00e9rieur de Cobbler vers 2006. YAML est assez populaire dans la communaut\u00e9 des langages dynamiques et le format dispose de biblioth\u00e8ques disponibles pour la s\u00e9rialisation dans de nombreux langages de programmation (Python, Perl, Ruby, etc.).","title":"YAML"},{"location":"dev/Terraform/","text":"Terraform Here are somes tf tips tricks Syntaxe Travaillons sur un fichier ''main.tf'' Exemple : output VAR { value = Hello World! } Sortie : Ouptus : VAR = Hello World! tfstate Le fichier tfstate permet de visualiser les actions entreprises (pareil \u00e0 un fichier de log). On pourra externaliser (remote state) le fichier tfstate. Tester et appliquer Tester Tester les actions \u00e0 entreprendre : terraform plan Appliquer Appliquer les modifications souhait\u00e9e : terraform apply","title":"Terraform"},{"location":"dev/Terraform/#terraform","text":"Here are somes tf tips tricks","title":"Terraform"},{"location":"dev/Terraform/#syntaxe","text":"Travaillons sur un fichier ''main.tf''","title":"Syntaxe"},{"location":"dev/Terraform/#exemple","text":"output VAR { value = Hello World! } Sortie : Ouptus : VAR = Hello World!","title":"Exemple :"},{"location":"dev/Terraform/#tfstate","text":"Le fichier tfstate permet de visualiser les actions entreprises (pareil \u00e0 un fichier de log). On pourra externaliser (remote state) le fichier tfstate.","title":"tfstate"},{"location":"dev/Terraform/#tester-et-appliquer","text":"","title":"Tester et appliquer"},{"location":"dev/Terraform/#tester","text":"Tester les actions \u00e0 entreprendre : terraform plan","title":"Tester"},{"location":"dev/Terraform/#appliquer","text":"Appliquer les modifications souhait\u00e9e : terraform apply","title":"Appliquer"},{"location":"dev/code/Git/","text":"Git Here are somes git tips tricks Config Username Ajout le nom d'utilisateur au profil git config --global user.name \"sboistel\" Mail Ajout le mail du profil git config --global user.email \"sboistel@mail.com\" Credentials Garder en m\u00e9moire les donn\u00e9es de connexion au repo : git config credential.helper store Branches Lister les Branches git branche Checkout V\u00e9rifier quel est la branche sur laquelle nous sommes: git checkout Changer de branche : git checkout nom_branche Push Push vers vers une autre branche que Master : git push -u origin nom_branche Merge Se positionner sur la branche master (principale..), et ensuite git merge nom_branche Ne pas omettre de push ensuite ;) git push Stash Le stash permet de garder les modifications faites en local sans les propager. On pourra v\u00e9rifier ce qu'il est possible de save : git stash list Clear la liste stash git stash clear Commiter un stash git stash pop","title":"Git"},{"location":"dev/code/Git/#git","text":"Here are somes git tips tricks","title":"Git"},{"location":"dev/code/Git/#config","text":"","title":"Config"},{"location":"dev/code/Git/#username","text":"Ajout le nom d'utilisateur au profil git config --global user.name \"sboistel\"","title":"Username"},{"location":"dev/code/Git/#mail","text":"Ajout le mail du profil git config --global user.email \"sboistel@mail.com\"","title":"Mail"},{"location":"dev/code/Git/#credentials","text":"Garder en m\u00e9moire les donn\u00e9es de connexion au repo : git config credential.helper store","title":"Credentials"},{"location":"dev/code/Git/#branches","text":"Lister les Branches git branche","title":"Branches"},{"location":"dev/code/Git/#checkout","text":"V\u00e9rifier quel est la branche sur laquelle nous sommes: git checkout Changer de branche : git checkout nom_branche","title":"Checkout"},{"location":"dev/code/Git/#push","text":"Push vers vers une autre branche que Master : git push -u origin nom_branche","title":"Push"},{"location":"dev/code/Git/#merge","text":"Se positionner sur la branche master (principale..), et ensuite git merge nom_branche Ne pas omettre de push ensuite ;) git push","title":"Merge"},{"location":"dev/code/Git/#stash","text":"Le stash permet de garder les modifications faites en local sans les propager. On pourra v\u00e9rifier ce qu'il est possible de save : git stash list Clear la liste stash git stash clear Commiter un stash git stash pop","title":"Stash"},{"location":"dev/code/Perl/","text":"Perl Perl tips tricks Variable Scalaire Contenant une seule valeure : $ Liste Example : ('Toto', 'Titi', 'Tata') @ Hashs Le type de la variable hashs % Example de hashs : my %liste = ( Perl = 'Super', Python = 'G\u00e9nial' ); print ($liste{Python}); Fonctions split La fonction split permet de retirer un \u00e9l\u00e8ment s\u00e9parateur : my @liste = split ' ', $liste_d_element join La fonction join permet d'ins\u00e9rer un ou plusieurs \u00e9l\u00e8ment s\u00e9parateur dans une liste d'\u00e9l\u00e8ment : my @liste = join '; ', @liste_d_element Pragma Utiliser les pragma pour s\u00e9curiser son script. strict Erreur de syntaxe, avoir un code propre use strict; warning Avertissement d'erreur de syntaxe use warning; Sucre de syntaxe Afin d'\u00e9viter d'avoir un code illisible avec nos \"\" ou '', deux m\u00e9thodes sont applicables dans chacun des cas. Guillement Pour substituer \"\" : qq/Chaine de carract\u00e8re/ Guillement Simple Pour substituer '' : q/Chaine de carract\u00e8re/ Liste Pour substituer une liste (ex : ('Toto', 'Titi', 'Tata')) : qw/Toto Titi Tata/ Here string OEF signifiant fin de ligne permet d'englober un parragraphe de donn\u00e9es : my $variable = OEF; ligne 1 de donn\u00e9es ligne 2 de donn\u00e9es ... EOF V\u00e9rifications Pr\u00e9dica 'if' V\u00e9rification de l'\u00e9xistance d'un \u00e9l\u00e8ment. use strict my $langages = ( Perl = 'super', Python = 'geniale', Ruby = 'ouais', Pascal = 'bof', C = 'bof, 'C ++' = 'bof' ); if (exists $langages{Haskell}) { print ( Mon langage est , $langages{Haskell}, \\n ); } elsif (exists $langages{Perl}) ( print ( Mon langage est , $langages{Perl}, \\n ); ) else { print Haskell n'est pas d\u00e9fini !\\n ; } Rendre son script int\u00e9ratif Standard input Chop retire le dernier carract\u00e8re Chomp retire le dernier carract\u00e8re seulement si celui-ci est un '\\n' Not\u00e9 STDIN , il sert \u00e0 poser une question \u00e0 l'utilisateur: use strict my $langages = ( Perl = 'super', Python = 'geniale', Ruby = 'ouais', Pascal = 'bof', C = 'bof, 'C ++' = 'bof' ); print Entrer le nom d'un langage : chomp (my $response = STDIN ); print ( $response est $langages{$response} !\\n ) if exists $langages{$response} or die $response n'\u00e9xiste pas !\\n ; Boucles For || Foreach For ou Foreach on la m\u00eame signification use stric my $langages = ( Perl = 'super', Python = 'geniale', Ruby = 'ouais', Pascal = 'bof', C = 'bof, 'C ++' = 'bof' ); print Element : $_\\n for (sort keys %langages); while Tant que quoi ? while( STDIN ) { chomp; die Fin. unless $_; # ou 'last unless $_;' pour quitter la boucle print coucou $_ ; } pseaudo case La fonction case n'\u00e9xiste pas mais un bricolage est possible : print Entrer un nombre entre 1 et 3 : ; my $response = STDIN ; for ($response) { $_ == 1 print C'est un\\n $_ == 2 print C'est deux\\n $_ == 3 print C'est trois\\n } Fichier Ouvrir un Fichier 'FILE' en majuscule - Convention de Perl - ' ' = read only - ' ' = write only - '+ ' = read / write / del - ' ' = add only - '+ ' = read / write / add Ouvrir un fichier avec : open FILE, ' ' Librairies REST CLIENT Comment afficher le token g\u00e9ner\u00e9 : print $authToken- {'authToken'}, \"\\n\";","title":"Perl"},{"location":"dev/code/Perl/#perl","text":"Perl tips tricks","title":"Perl"},{"location":"dev/code/Perl/#variable","text":"","title":"Variable"},{"location":"dev/code/Perl/#scalaire","text":"Contenant une seule valeure : $","title":"Scalaire"},{"location":"dev/code/Perl/#liste","text":"Example : ('Toto', 'Titi', 'Tata') @","title":"Liste"},{"location":"dev/code/Perl/#hashs","text":"Le type de la variable hashs % Example de hashs : my %liste = ( Perl = 'Super', Python = 'G\u00e9nial' ); print ($liste{Python});","title":"Hashs"},{"location":"dev/code/Perl/#fonctions","text":"","title":"Fonctions"},{"location":"dev/code/Perl/#split","text":"La fonction split permet de retirer un \u00e9l\u00e8ment s\u00e9parateur : my @liste = split ' ', $liste_d_element","title":"split"},{"location":"dev/code/Perl/#join","text":"La fonction join permet d'ins\u00e9rer un ou plusieurs \u00e9l\u00e8ment s\u00e9parateur dans une liste d'\u00e9l\u00e8ment : my @liste = join '; ', @liste_d_element","title":"join"},{"location":"dev/code/Perl/#pragma","text":"Utiliser les pragma pour s\u00e9curiser son script.","title":"Pragma"},{"location":"dev/code/Perl/#strict","text":"Erreur de syntaxe, avoir un code propre use strict;","title":"strict"},{"location":"dev/code/Perl/#warning","text":"Avertissement d'erreur de syntaxe use warning;","title":"warning"},{"location":"dev/code/Perl/#sucre-de-syntaxe","text":"Afin d'\u00e9viter d'avoir un code illisible avec nos \"\" ou '', deux m\u00e9thodes sont applicables dans chacun des cas.","title":"Sucre de syntaxe"},{"location":"dev/code/Perl/#guillement","text":"Pour substituer \"\" : qq/Chaine de carract\u00e8re/","title":"Guillement"},{"location":"dev/code/Perl/#guillement-simple","text":"Pour substituer '' : q/Chaine de carract\u00e8re/","title":"Guillement Simple"},{"location":"dev/code/Perl/#liste_1","text":"Pour substituer une liste (ex : ('Toto', 'Titi', 'Tata')) : qw/Toto Titi Tata/","title":"Liste"},{"location":"dev/code/Perl/#here-string","text":"OEF signifiant fin de ligne permet d'englober un parragraphe de donn\u00e9es : my $variable = OEF; ligne 1 de donn\u00e9es ligne 2 de donn\u00e9es ... EOF","title":"Here string"},{"location":"dev/code/Perl/#verifications","text":"","title":"V\u00e9rifications"},{"location":"dev/code/Perl/#predica-if","text":"V\u00e9rification de l'\u00e9xistance d'un \u00e9l\u00e8ment. use strict my $langages = ( Perl = 'super', Python = 'geniale', Ruby = 'ouais', Pascal = 'bof', C = 'bof, 'C ++' = 'bof' ); if (exists $langages{Haskell}) { print ( Mon langage est , $langages{Haskell}, \\n ); } elsif (exists $langages{Perl}) ( print ( Mon langage est , $langages{Perl}, \\n ); ) else { print Haskell n'est pas d\u00e9fini !\\n ; }","title":"Pr\u00e9dica 'if'"},{"location":"dev/code/Perl/#rendre-son-script-interatif","text":"","title":"Rendre son script int\u00e9ratif"},{"location":"dev/code/Perl/#standard-input","text":"Chop retire le dernier carract\u00e8re Chomp retire le dernier carract\u00e8re seulement si celui-ci est un '\\n' Not\u00e9 STDIN , il sert \u00e0 poser une question \u00e0 l'utilisateur: use strict my $langages = ( Perl = 'super', Python = 'geniale', Ruby = 'ouais', Pascal = 'bof', C = 'bof, 'C ++' = 'bof' ); print Entrer le nom d'un langage : chomp (my $response = STDIN ); print ( $response est $langages{$response} !\\n ) if exists $langages{$response} or die $response n'\u00e9xiste pas !\\n ;","title":"Standard input"},{"location":"dev/code/Perl/#boucles","text":"","title":"Boucles"},{"location":"dev/code/Perl/#for-foreach","text":"For ou Foreach on la m\u00eame signification use stric my $langages = ( Perl = 'super', Python = 'geniale', Ruby = 'ouais', Pascal = 'bof', C = 'bof, 'C ++' = 'bof' ); print Element : $_\\n for (sort keys %langages);","title":"For || Foreach"},{"location":"dev/code/Perl/#while","text":"Tant que quoi ? while( STDIN ) { chomp; die Fin. unless $_; # ou 'last unless $_;' pour quitter la boucle print coucou $_ ; }","title":"while"},{"location":"dev/code/Perl/#pseaudo-case","text":"La fonction case n'\u00e9xiste pas mais un bricolage est possible : print Entrer un nombre entre 1 et 3 : ; my $response = STDIN ; for ($response) { $_ == 1 print C'est un\\n $_ == 2 print C'est deux\\n $_ == 3 print C'est trois\\n }","title":"pseaudo case"},{"location":"dev/code/Perl/#fichier","text":"","title":"Fichier"},{"location":"dev/code/Perl/#ouvrir-un-fichier","text":"'FILE' en majuscule - Convention de Perl - ' ' = read only - ' ' = write only - '+ ' = read / write / del - ' ' = add only - '+ ' = read / write / add Ouvrir un fichier avec : open FILE, ' '","title":"Ouvrir un Fichier"},{"location":"dev/code/Perl/#librairies","text":"","title":"Librairies"},{"location":"dev/code/Perl/#rest","text":"","title":"REST"},{"location":"dev/code/Perl/#client","text":"Comment afficher le token g\u00e9ner\u00e9 : print $authToken- {'authToken'}, \"\\n\";","title":"CLIENT"},{"location":"dev/code/Python/","text":"Python Python tips tricks Syntaxe Coding Format UTF-8 : # -*- coding:Utf-8 -*- Librairy Import de librairie On peut importer un seul module d'une librairie : from LIBRAIRIE import module On peut aussi importer la librairie complette : from LIBRAIRIE import * Ou depuis un autre fichier.Py : from fichier import classe Interpollation Divers techniques existe afin de sortir un clef d'une liste: print( Je m'appel %s ! % liste_nom['nom']) print( Je m'appel %(nom)s ! % d) print( Je m'appel {0} ! .format(d['nom'])) V\u00e9rifications V\u00e9rifier si un block est correct avec 'try' : try: # V\u00e9rifier ce bloc file = open('infos.txt', 'r') print(file.read()) except: # Si erreur se trouve dans try print( erreur ) finally: # Qui s'\u00e9xecutera quoi qu'il arrive des blocs pr\u00e9c\u00e9dents file.close La v\u00e9rification peut se traduire par plusieur m\u00e9thodes : execpt IOError # Pour se qui concerne les fichier ou \u00e9l\u00e8ments en dur except ValueError # Qui concernera les \u00e9rreurs de conversions La m\u00e9thode la plus s\u00fbr reste l'option 'with': try: # V\u00e9rifier ce bloc with open('infox.txt', 'r') as file: # Avec le fichier, l'ouvrir en var file for line in file.readlines(): print(int(line.strip())) except IOError as err: print( Erreur de fichier , err) except ValueError: print( Erreur de conversion ) except: print( Erreur inconnue, tous aux abris. ) else: print( Fichier connue de tous wallah ) TKinter TKinter est une librairie permettant de g\u00e9nerer des fen\u00eatre sur le code Python. Exemple de code : from Tkinter import * fenetre = Tk() label = Label(fenetre, text= Exmple de coprs de fen\u00eatre ) label.pack() fenetre.mainloop() Personnalisation de la fen\u00eatre Liste d'\u00e9l\u00e8ments permettant de personnaliser une fen\u00eatre (ici : window = Tk() ): - window.title(\" My application \") - window.geometry(\"720x480\") - window.minsize(700, 300) - window.iconbitmap(\"image.ico\") - window.config(background='#CC0000') Widget Case \u00e0 cocher Liste de case \u00e0 cocher : caseACocher1 = Checkbutton(window, text= Case N\u00b01 ).pack() caseACocher2 = Checkbutton(window, text= Case N\u00b02 ).pack() ... Champs de saisie Champs de saisie : value = StringVar() value.set( Zonne de text ) entree = Entry(window, textvariable=value, width=30) entree.pack() Barre de menu Menu ''fichier'' : file_menu = Menu(menu_bar, tearoff=0) file_menu.add_command(label= Nouveau , command=generate_password) file_menu.add_command(label= Quitter , command=window.quit) menu_bar.add_cascade(label= Fichier , menu=file_menu)","title":"Python"},{"location":"dev/code/Python/#python","text":"Python tips tricks","title":"Python"},{"location":"dev/code/Python/#syntaxe","text":"","title":"Syntaxe"},{"location":"dev/code/Python/#coding","text":"Format UTF-8 : # -*- coding:Utf-8 -*-","title":"Coding"},{"location":"dev/code/Python/#librairy","text":"","title":"Librairy"},{"location":"dev/code/Python/#import-de-librairie","text":"On peut importer un seul module d'une librairie : from LIBRAIRIE import module On peut aussi importer la librairie complette : from LIBRAIRIE import * Ou depuis un autre fichier.Py : from fichier import classe","title":"Import de librairie"},{"location":"dev/code/Python/#interpollation","text":"Divers techniques existe afin de sortir un clef d'une liste: print( Je m'appel %s ! % liste_nom['nom']) print( Je m'appel %(nom)s ! % d) print( Je m'appel {0} ! .format(d['nom']))","title":"Interpollation"},{"location":"dev/code/Python/#verifications","text":"V\u00e9rifier si un block est correct avec 'try' : try: # V\u00e9rifier ce bloc file = open('infos.txt', 'r') print(file.read()) except: # Si erreur se trouve dans try print( erreur ) finally: # Qui s'\u00e9xecutera quoi qu'il arrive des blocs pr\u00e9c\u00e9dents file.close La v\u00e9rification peut se traduire par plusieur m\u00e9thodes : execpt IOError # Pour se qui concerne les fichier ou \u00e9l\u00e8ments en dur except ValueError # Qui concernera les \u00e9rreurs de conversions La m\u00e9thode la plus s\u00fbr reste l'option 'with': try: # V\u00e9rifier ce bloc with open('infox.txt', 'r') as file: # Avec le fichier, l'ouvrir en var file for line in file.readlines(): print(int(line.strip())) except IOError as err: print( Erreur de fichier , err) except ValueError: print( Erreur de conversion ) except: print( Erreur inconnue, tous aux abris. ) else: print( Fichier connue de tous wallah )","title":"V\u00e9rifications"},{"location":"dev/code/Python/#tkinter","text":"TKinter est une librairie permettant de g\u00e9nerer des fen\u00eatre sur le code Python. Exemple de code : from Tkinter import * fenetre = Tk() label = Label(fenetre, text= Exmple de coprs de fen\u00eatre ) label.pack() fenetre.mainloop()","title":"TKinter"},{"location":"dev/code/Python/#personnalisation-de-la-fenetre","text":"Liste d'\u00e9l\u00e8ments permettant de personnaliser une fen\u00eatre (ici : window = Tk() ): - window.title(\" My application \") - window.geometry(\"720x480\") - window.minsize(700, 300) - window.iconbitmap(\"image.ico\") - window.config(background='#CC0000')","title":"Personnalisation de la fen\u00eatre"},{"location":"dev/code/Python/#widget","text":"","title":"Widget"},{"location":"dev/code/Python/#case-a-cocher","text":"Liste de case \u00e0 cocher : caseACocher1 = Checkbutton(window, text= Case N\u00b01 ).pack() caseACocher2 = Checkbutton(window, text= Case N\u00b02 ).pack() ...","title":"Case \u00e0 cocher"},{"location":"dev/code/Python/#champs-de-saisie","text":"Champs de saisie : value = StringVar() value.set( Zonne de text ) entree = Entry(window, textvariable=value, width=30) entree.pack()","title":"Champs de saisie"},{"location":"dev/code/Python/#barre-de-menu","text":"Menu ''fichier'' : file_menu = Menu(menu_bar, tearoff=0) file_menu.add_command(label= Nouveau , command=generate_password) file_menu.add_command(label= Quitter , command=window.quit) menu_bar.add_cascade(label= Fichier , menu=file_menu)","title":"Barre de menu"},{"location":"dev/containers/Conteneurisation/","text":"Containers Here are somes container tips tricks Qu'est-ce que la conteneurisation ? L'objectif de la conteneurisation est de faire en sorte qu'un ensemble logiciel coh\u00e9rent puisse fonctionner au sein d'un conteneur . Pour qu'une application puisse tourner au sein d'un conteneur, elle doit \u00eatre empaquet\u00e9e , c'est \u00e0 dire qu'on la met \u00e0 l'int\u00e9rieur d'un paquet (une image dans la terminologie des conteneurs) avec ses d\u00e9pendances. Il existe d'ailleurs des images officielles, sur le Hub Docker par exemple, permettant de faire tourner tout type de logiciel (MySQL, Java 8, wordpresse, etc). Type de syst\u00e8me Il y a plusieurs type de syst\u00e8me de conteneurisation. Dotcloud plus connu sous le nom de Docker sera de moins en moins utilis\u00e9 car tant \u00e0 le d\u00e9pr\u00e9cier. On trouvera aussi : - CoreOS - Mesos - LXC - OpenVZ - Containerd - etc ...","title":"Containers"},{"location":"dev/containers/Conteneurisation/#containers","text":"Here are somes container tips tricks","title":"Containers"},{"location":"dev/containers/Conteneurisation/#quest-ce-que-la-conteneurisation","text":"L'objectif de la conteneurisation est de faire en sorte qu'un ensemble logiciel coh\u00e9rent puisse fonctionner au sein d'un conteneur . Pour qu'une application puisse tourner au sein d'un conteneur, elle doit \u00eatre empaquet\u00e9e , c'est \u00e0 dire qu'on la met \u00e0 l'int\u00e9rieur d'un paquet (une image dans la terminologie des conteneurs) avec ses d\u00e9pendances. Il existe d'ailleurs des images officielles, sur le Hub Docker par exemple, permettant de faire tourner tout type de logiciel (MySQL, Java 8, wordpresse, etc).","title":"Qu'est-ce que la conteneurisation ?"},{"location":"dev/containers/Conteneurisation/#type-de-systeme","text":"Il y a plusieurs type de syst\u00e8me de conteneurisation. Dotcloud plus connu sous le nom de Docker sera de moins en moins utilis\u00e9 car tant \u00e0 le d\u00e9pr\u00e9cier. On trouvera aussi : - CoreOS - Mesos - LXC - OpenVZ - Containerd - etc ...","title":"Type de syst\u00e8me"},{"location":"dev/containers/Docker-&-Kubernetes/","text":"Docker K8S Here are somes containers tips tricks Docker Lister les processus en cours : docker ps -a Images Chaque processus d\u00e9pendera d'une image pareil \u00e0 une iso + son appli pour une vm. Chercher une image : docker search nginx T\u00e9l\u00e9charger une image : docker pull nginx Lister les images t\u00e9l\u00e9charg\u00e9es : docker images ou docker image ls Supprimer une image : docker rmi nginx :warning: Si une image est sur le disque mais nous est impossible de supprimer (on parlera d'une image souvent test\u00e9 \u00e0 l'installation de docker) Nous allons devoir forcer sa suppression : docker rmi -f hello-world Voir l'historique de son image : docker history sboistel/image:verison(1.1) Commit Apr\u00e8s avoir fait des changements sur une image, comment enregister tout \u00e7a ? docker commit mycentos01 sboistel/mycentos:1.0 DockerFile Cr\u00e9er un docker file : ''vim dockerfile'' FROM centos RPM yum install -y wget RPM yum install yum-utils :warning: Attention, plus il y aura de nombre de ligne dans le dockerfile, plus le nombre de couche sera important et engedra les performences. Construire l'image : docker build -t sboistel/mycentos:1.0 docker build -t mon_image:v1.0 Champs Liste des diff\u00e9rents champs compl\u00e9table : - FROM : Pour les images vierge seuelement ! - LABEL version : Donner une version - LABEL description : D\u00e9crire la version - ENV : Variable d'environnement : Example - JAVA_HOME /usr/bin/java - ORACLE_HOME /u01/app/oracle/$ORACLE_SID/ - RUN : Commande \u00e0 effectuer \"yum install ..\" - WORKDIR : Emplacement de travail - ... Bash Plusieurs arguments serrons ici utilis\u00e9s : - t : Avoir un terminal en sortie - i : Interactif Exemple : docker run -ti ubuntu Ex\u00e9cuter une commande dans l'environnement Bash : docker run -ti ubuntu ps Ex\u00e9cuter une commande dans un conteneur d\u00e9tach\u00e9 en cours d'\u00e9x\u00e9cution : docker exec -name=container01 -hostname=host01 centos ping 127.0.0.1 Attach\u00e9 / Non Attach\u00e9 Ex\u00e9cuter l'image ubuntu avec des param\u00e8tres d'attachements : docker run --name=container01 --hostname=host01 -it ubuntu Ex\u00e9cuter l'image ubuntu avec des param\u00e8tres de d\u00e9tachement : docker run -d -it centos ping 127.0.0.1 Du coup, o\u00f9 se passes les informations du conteneur d\u00e9tach\u00e9 ? : docker logs ID_DU_CONTAINER Rappel pour avoir l'id du conteneur : docker ps Afin de r\u00e9ccup\u00e9rer la main sur la session du conteneur d\u00e9tach\u00e9 : docker attache ID_DU_CONTAINER Revenir au mode d\u00e9tach\u00e9, faire la combinaison suivante : CTRL + Q Inspecter un conteneur Avoir les informations du conteneur en format json : docker inspect container01 Agr\u00e9gation de recherche R\u00e9colter seulement ce qui nous int\u00e9r\u00e8sse ? - Avoir un status BASH docker inspect --format='{{.State.Status}}' container01 Avoir l'iP du container01 BASH docker inspect --format='{{.NetworkSettings.IPAddress}}' container01 R\u00e9ccolter le tableau ''State'' : docker inspect --format='{{json .State}}' container01 Filtres Filtrer tout les conteneur ayant comme nom web : docker ps -a --filter name=web Filtrer tout les conteneurs ayant un status ferm\u00e9 : docker ps -a --filter status=exited Formater l'affichage Formater la sortie : docker ps -a --format {{.Names}} : {{.Status}} Import / Export Export Comment exporter son image ? docker export -o mycentos01.tar mycentos V\u00e9rifier son export : tar tvf mycentos01.tar Tout est ok, je compresse : gzip mycentos01.tar Import Comment import une image export\u00e9e ? : docker import mycentos.tar.gz mycentos:1.0 Arguments List d'arguments : - P : Mapper les ports r\u00e9seau du conteneur Kubernetes Before : Kubernetes ou K8s (8 \u00e9tant le nombre de lettre dans Kubernetes) Kubernetes est un Orchestrateur (g\u00e8re des clusters) Il aura plusieurs notions : - Gestion des configurations - Gestion des mots de passe (secrets) - RBAC (Role base acces controler) \"IAM\" Lexique Kubelet : Deamond s'\u00e9x\u00e9cutant dans les workers Cluster Un cluster c'est quoi ? Un ensemble de noeud de type linux ou windows Pods Un cluster \u00e9xecute des pods, mais de quoi s'agit-il ? Il s'agit d'un ensemble de conteneurs se partageant les ressources. Lister les pods : kubectl get pods Tester les ports : kubectl port-forward POD_NAME 8000:80 R\u00e9ccup\u00e9rer les \u00e9l\u00e8ments d'un pod : kubectl describe po/POD_NAME Service Les service exposent les ports d'un pod Nodes Deux types de noeud : - Que font les Master ? - Gestion du cluster - Orchestre l'\u00e9x\u00e9cution des pods sur les noeuds - Expose l'API server Que font les Marker ? Ex\u00e9cute les pods Fournit les ressources aux pods Communique avec le master (actions \u00e0 ex\u00e9cuter ...) Lister les noeuds : kubectl get nodes","title":"Docker & K8S"},{"location":"dev/containers/Docker-&-Kubernetes/#docker-k8s","text":"Here are somes containers tips tricks","title":"Docker &amp; K8S"},{"location":"dev/containers/Docker-&-Kubernetes/#docker","text":"Lister les processus en cours : docker ps -a","title":"Docker"},{"location":"dev/containers/Docker-&-Kubernetes/#images","text":"Chaque processus d\u00e9pendera d'une image pareil \u00e0 une iso + son appli pour une vm. Chercher une image : docker search nginx T\u00e9l\u00e9charger une image : docker pull nginx Lister les images t\u00e9l\u00e9charg\u00e9es : docker images ou docker image ls Supprimer une image : docker rmi nginx :warning: Si une image est sur le disque mais nous est impossible de supprimer (on parlera d'une image souvent test\u00e9 \u00e0 l'installation de docker) Nous allons devoir forcer sa suppression : docker rmi -f hello-world Voir l'historique de son image : docker history sboistel/image:verison(1.1)","title":"Images"},{"location":"dev/containers/Docker-&-Kubernetes/#commit","text":"Apr\u00e8s avoir fait des changements sur une image, comment enregister tout \u00e7a ? docker commit mycentos01 sboistel/mycentos:1.0","title":"Commit"},{"location":"dev/containers/Docker-&-Kubernetes/#dockerfile","text":"Cr\u00e9er un docker file : ''vim dockerfile'' FROM centos RPM yum install -y wget RPM yum install yum-utils :warning: Attention, plus il y aura de nombre de ligne dans le dockerfile, plus le nombre de couche sera important et engedra les performences. Construire l'image : docker build -t sboistel/mycentos:1.0 docker build -t mon_image:v1.0","title":"DockerFile"},{"location":"dev/containers/Docker-&-Kubernetes/#champs","text":"Liste des diff\u00e9rents champs compl\u00e9table : - FROM : Pour les images vierge seuelement ! - LABEL version : Donner une version - LABEL description : D\u00e9crire la version - ENV : Variable d'environnement : Example - JAVA_HOME /usr/bin/java - ORACLE_HOME /u01/app/oracle/$ORACLE_SID/ - RUN : Commande \u00e0 effectuer \"yum install ..\" - WORKDIR : Emplacement de travail - ...","title":"Champs"},{"location":"dev/containers/Docker-&-Kubernetes/#bash","text":"Plusieurs arguments serrons ici utilis\u00e9s : - t : Avoir un terminal en sortie - i : Interactif Exemple : docker run -ti ubuntu Ex\u00e9cuter une commande dans l'environnement Bash : docker run -ti ubuntu ps Ex\u00e9cuter une commande dans un conteneur d\u00e9tach\u00e9 en cours d'\u00e9x\u00e9cution : docker exec -name=container01 -hostname=host01 centos ping 127.0.0.1","title":"Bash"},{"location":"dev/containers/Docker-&-Kubernetes/#attache-non-attache","text":"Ex\u00e9cuter l'image ubuntu avec des param\u00e8tres d'attachements : docker run --name=container01 --hostname=host01 -it ubuntu Ex\u00e9cuter l'image ubuntu avec des param\u00e8tres de d\u00e9tachement : docker run -d -it centos ping 127.0.0.1 Du coup, o\u00f9 se passes les informations du conteneur d\u00e9tach\u00e9 ? : docker logs ID_DU_CONTAINER Rappel pour avoir l'id du conteneur : docker ps Afin de r\u00e9ccup\u00e9rer la main sur la session du conteneur d\u00e9tach\u00e9 : docker attache ID_DU_CONTAINER Revenir au mode d\u00e9tach\u00e9, faire la combinaison suivante : CTRL + Q","title":"Attach\u00e9 / Non Attach\u00e9"},{"location":"dev/containers/Docker-&-Kubernetes/#inspecter-un-conteneur","text":"Avoir les informations du conteneur en format json : docker inspect container01","title":"Inspecter un conteneur"},{"location":"dev/containers/Docker-&-Kubernetes/#agregation-de-recherche","text":"R\u00e9colter seulement ce qui nous int\u00e9r\u00e8sse ? - Avoir un status BASH docker inspect --format='{{.State.Status}}' container01 Avoir l'iP du container01 BASH docker inspect --format='{{.NetworkSettings.IPAddress}}' container01 R\u00e9ccolter le tableau ''State'' : docker inspect --format='{{json .State}}' container01","title":"Agr\u00e9gation de recherche"},{"location":"dev/containers/Docker-&-Kubernetes/#filtres","text":"Filtrer tout les conteneur ayant comme nom web : docker ps -a --filter name=web Filtrer tout les conteneurs ayant un status ferm\u00e9 : docker ps -a --filter status=exited","title":"Filtres"},{"location":"dev/containers/Docker-&-Kubernetes/#formater-laffichage","text":"Formater la sortie : docker ps -a --format {{.Names}} : {{.Status}}","title":"Formater l'affichage"},{"location":"dev/containers/Docker-&-Kubernetes/#import-export","text":"","title":"Import / Export"},{"location":"dev/containers/Docker-&-Kubernetes/#export","text":"Comment exporter son image ? docker export -o mycentos01.tar mycentos V\u00e9rifier son export : tar tvf mycentos01.tar Tout est ok, je compresse : gzip mycentos01.tar","title":"Export"},{"location":"dev/containers/Docker-&-Kubernetes/#import","text":"Comment import une image export\u00e9e ? : docker import mycentos.tar.gz mycentos:1.0","title":"Import"},{"location":"dev/containers/Docker-&-Kubernetes/#arguments","text":"List d'arguments : - P : Mapper les ports r\u00e9seau du conteneur","title":"Arguments"},{"location":"dev/containers/Docker-&-Kubernetes/#kubernetes","text":"Before : Kubernetes ou K8s (8 \u00e9tant le nombre de lettre dans Kubernetes) Kubernetes est un Orchestrateur (g\u00e8re des clusters) Il aura plusieurs notions : - Gestion des configurations - Gestion des mots de passe (secrets) - RBAC (Role base acces controler) \"IAM\"","title":"Kubernetes"},{"location":"dev/containers/Docker-&-Kubernetes/#lexique","text":"Kubelet : Deamond s'\u00e9x\u00e9cutant dans les workers","title":"Lexique"},{"location":"dev/containers/Docker-&-Kubernetes/#cluster","text":"Un cluster c'est quoi ? Un ensemble de noeud de type linux ou windows","title":"Cluster"},{"location":"dev/containers/Docker-&-Kubernetes/#pods","text":"Un cluster \u00e9xecute des pods, mais de quoi s'agit-il ? Il s'agit d'un ensemble de conteneurs se partageant les ressources. Lister les pods : kubectl get pods Tester les ports : kubectl port-forward POD_NAME 8000:80 R\u00e9ccup\u00e9rer les \u00e9l\u00e8ments d'un pod : kubectl describe po/POD_NAME","title":"Pods"},{"location":"dev/containers/Docker-&-Kubernetes/#service","text":"Les service exposent les ports d'un pod","title":"Service"},{"location":"dev/containers/Docker-&-Kubernetes/#nodes","text":"Deux types de noeud : - Que font les Master ? - Gestion du cluster - Orchestre l'\u00e9x\u00e9cution des pods sur les noeuds - Expose l'API server Que font les Marker ? Ex\u00e9cute les pods Fournit les ressources aux pods Communique avec le master (actions \u00e0 ex\u00e9cuter ...) Lister les noeuds : kubectl get nodes","title":"Nodes"},{"location":"monitoring/Centreon/","text":"Centreon Here are somes Centreon tips tricks Analyse V\u00e9rifier les connexions tent\u00e9es : /var/log/centreon/login.log Poller List storage from poller : /usr/lib/centreon/plugins/centreon-plugins/centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=list-storages --hostname=$HOST | grep / Stats Voir les stats du poller : /usr/sbin/centenginestats R\u00e9pertoire du log tail -f /var/log/centreon-broker/poller-module.log Yellow state Last update yellow ? Lors d'une migration de poller, s'assurer que l'adresse du central soit bien mensionn\u00e9e dans le broker du poller. Commandes Liste de commandes centreons \u00e0 garder en t\u00eate Plugin Commande du plugin centreon : /usr/lib/centreon/plugins/centreon-plugins/centreon_plugins.pl Lister les FS : On va utiliser le mode list-storages : /usr/lib/centreon/plugins/centreon-plugins/centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=list-storages --hostname=${iP}","title":"Centreon"},{"location":"monitoring/Centreon/#centreon","text":"Here are somes Centreon tips tricks","title":"Centreon"},{"location":"monitoring/Centreon/#analyse","text":"V\u00e9rifier les connexions tent\u00e9es : /var/log/centreon/login.log","title":"Analyse"},{"location":"monitoring/Centreon/#poller","text":"List storage from poller : /usr/lib/centreon/plugins/centreon-plugins/centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=list-storages --hostname=$HOST | grep /","title":"Poller"},{"location":"monitoring/Centreon/#stats","text":"Voir les stats du poller : /usr/sbin/centenginestats R\u00e9pertoire du log tail -f /var/log/centreon-broker/poller-module.log","title":"Stats"},{"location":"monitoring/Centreon/#yellow-state","text":"Last update yellow ? Lors d'une migration de poller, s'assurer que l'adresse du central soit bien mensionn\u00e9e dans le broker du poller.","title":"Yellow state"},{"location":"monitoring/Centreon/#commandes","text":"Liste de commandes centreons \u00e0 garder en t\u00eate","title":"Commandes"},{"location":"monitoring/Centreon/#plugin","text":"Commande du plugin centreon : /usr/lib/centreon/plugins/centreon-plugins/centreon_plugins.pl Lister les FS : On va utiliser le mode list-storages : /usr/lib/centreon/plugins/centreon-plugins/centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=list-storages --hostname=${iP}","title":"Plugin"},{"location":"monitoring/ELK/","text":"Elasticsearch, Logstash, Kibana Elasticsearch Elasticsearch is composed by : - LOGSTASH - KIBANA - X-PACK - BEATS LOGSTASH Logstash is an event processing pipeline KIBANA Kibana is a monitoring analyse platforme which allow human to easly read elasticsearch datas We can call Kibana as the elasticsearch's dashboard X-PACK Is a packe of features for Kibana - Security - Monitoring - Alerting - Reporting - Machine Learning - Abnormality Detection - Forcasting - Graph - Elasticsearch SQL BEATS Beats farm data for logstash","title":"Elasticsearch, Logstash, Kibana"},{"location":"monitoring/ELK/#elasticsearch-logstash-kibana","text":"","title":"Elasticsearch, Logstash, Kibana"},{"location":"monitoring/ELK/#elasticsearch","text":"Elasticsearch is composed by : - LOGSTASH - KIBANA - X-PACK - BEATS","title":"Elasticsearch"},{"location":"monitoring/ELK/#logstash","text":"Logstash is an event processing pipeline","title":"LOGSTASH"},{"location":"monitoring/ELK/#kibana","text":"Kibana is a monitoring analyse platforme which allow human to easly read elasticsearch datas We can call Kibana as the elasticsearch's dashboard","title":"KIBANA"},{"location":"monitoring/ELK/#x-pack","text":"Is a packe of features for Kibana - Security - Monitoring - Alerting - Reporting - Machine Learning - Abnormality Detection - Forcasting - Graph - Elasticsearch SQL","title":"X-PACK"},{"location":"monitoring/ELK/#beats","text":"Beats farm data for logstash","title":"BEATS"},{"location":"monitoring/KVM/","text":"KVM QEMU How to convert ? How to convert qcow2 virtual disk file ? : qemu-img convert -f qcow2 qcow2_file_name -O vdi vdi_file_name Example : Format centos7_64.qcow2 image to vdi file : qemu-img convert -f qcow2 centos7_64.qcow2 -O vdi centos7_64.vdi","title":"KVM"},{"location":"monitoring/KVM/#kvm","text":"","title":"KVM"},{"location":"monitoring/KVM/#qemu","text":"","title":"QEMU"},{"location":"monitoring/KVM/#how-to-convert","text":"How to convert qcow2 virtual disk file ? : qemu-img convert -f qcow2 qcow2_file_name -O vdi vdi_file_name","title":"How to convert ?"},{"location":"monitoring/KVM/#example","text":"Format centos7_64.qcow2 image to vdi file : qemu-img convert -f qcow2 centos7_64.qcow2 -O vdi centos7_64.vdi","title":"Example :"},{"location":"monitoring/Proxmox-VE/","text":"Proxmox Virtual Environnement Subscription How to remove Proxmox proxy subscription pop up ? Change to Active Situated at the line ~120 Change the status to Active : sed -i.bak 's/NotFound/Active/g' /usr/share/perl5/PVE/API2/Subscription.pm Restart service Restart pveproxy service refresh next your web page : systemctl restart pveproxy.service","title":"Proxmox Virtual Environnement"},{"location":"monitoring/Proxmox-VE/#proxmox-virtual-environnement","text":"","title":"Proxmox Virtual Environnement"},{"location":"monitoring/Proxmox-VE/#subscription","text":"How to remove Proxmox proxy subscription pop up ?","title":"Subscription"},{"location":"monitoring/Proxmox-VE/#change-to-active","text":"Situated at the line ~120 Change the status to Active : sed -i.bak 's/NotFound/Active/g' /usr/share/perl5/PVE/API2/Subscription.pm","title":"Change to Active"},{"location":"monitoring/Proxmox-VE/#restart-service","text":"Restart pveproxy service refresh next your web page : systemctl restart pveproxy.service","title":"Restart service"},{"location":"os/linux/Desktop-Environement/","text":"Desktop environnement Here are somes Desktop Environement tips tricks Gnome Ajouter une application dans gnom shell. Ajouter un fichier .desktop dans /usr/share/appliations/MONAPPLI.desktop : [Desktop Entry] Name=MonAppli Comment=Descritpion de l'appli Exec=MonAppli.sh %U Icon=/usr/share/icons/monappli.svg Terminal=false Type=Application Encoding=UTF-8 Categories=Network;Application Desktop Manager Lightdm Autologin Editer le fichier de configuration suivant : /etc/lightdm/lightdm.conf Compl\u00e9ter les informations attendues : autologin-user=sboistel","title":"Desktop environnement"},{"location":"os/linux/Desktop-Environement/#desktop-environnement","text":"Here are somes Desktop Environement tips tricks","title":"Desktop environnement"},{"location":"os/linux/Desktop-Environement/#gnome","text":"Ajouter une application dans gnom shell. Ajouter un fichier .desktop dans /usr/share/appliations/MONAPPLI.desktop : [Desktop Entry] Name=MonAppli Comment=Descritpion de l'appli Exec=MonAppli.sh %U Icon=/usr/share/icons/monappli.svg Terminal=false Type=Application Encoding=UTF-8 Categories=Network;Application","title":"Gnome"},{"location":"os/linux/Desktop-Environement/#desktop-manager","text":"","title":"Desktop Manager"},{"location":"os/linux/Desktop-Environement/#lightdm","text":"","title":"Lightdm"},{"location":"os/linux/Desktop-Environement/#autologin","text":"Editer le fichier de configuration suivant : /etc/lightdm/lightdm.conf Compl\u00e9ter les informations attendues : autologin-user=sboistel","title":"Autologin"},{"location":"os/linux/Linux/","text":"Linux Here are somes linux/unix tips tricks Linux Linux Packages Network System SYSTEM Index Command Process Volumes Memory Service Application Automation Network Screen Account Time/Date Desktop Environnement Desktop environnement Packages Packages Index RPM APT Analyse Analyse Index Load Connection Regular Parsing Regular parsing VIM VIM Navigation Search Highlithing","title":"Linux"},{"location":"os/linux/Linux/#linux","text":"Here are somes linux/unix tips tricks","title":"Linux"},{"location":"os/linux/Linux/#linux_1","text":"Linux Packages Network","title":"Linux"},{"location":"os/linux/Linux/#system","text":"SYSTEM Index Command Process Volumes Memory Service Application Automation Network Screen Account Time/Date","title":"System"},{"location":"os/linux/Linux/#desktop-environnement","text":"Desktop environnement","title":"Desktop Environnement"},{"location":"os/linux/Linux/#packages","text":"Packages Index RPM APT","title":"Packages"},{"location":"os/linux/Linux/#analyse","text":"Analyse Index Load Connection","title":"Analyse"},{"location":"os/linux/Linux/#regular-parsing","text":"Regular parsing","title":"Regular Parsing"},{"location":"os/linux/Linux/#vim","text":"VIM Navigation Search Highlithing","title":"VIM"},{"location":"os/linux/analyse/","text":"Analyse Index Load SAR On trouvera les fichier de log de l'outil sysstat dans : /var/log/sysstat/ Chacun des fichier dans ce dossier sera norm\u00e9 par sa$JOUR_DU_MOIS . Liste des param\u00e8tres : - S : swap - r : RAM - R : Caches - u : Utilisateur Connection User Check last user connection : last -15 -aFw For DEB packages only : cat /var/log/auth.log","title":"Analyse"},{"location":"os/linux/analyse/#analyse","text":"","title":"Analyse"},{"location":"os/linux/analyse/#index","text":"","title":"Index"},{"location":"os/linux/analyse/#load","text":"","title":"Load"},{"location":"os/linux/analyse/#sar","text":"On trouvera les fichier de log de l'outil sysstat dans : /var/log/sysstat/ Chacun des fichier dans ce dossier sera norm\u00e9 par sa$JOUR_DU_MOIS . Liste des param\u00e8tres : - S : swap - r : RAM - R : Caches - u : Utilisateur","title":"SAR"},{"location":"os/linux/analyse/#connection","text":"","title":"Connection"},{"location":"os/linux/analyse/#user","text":"Check last user connection : last -15 -aFw For DEB packages only : cat /var/log/auth.log","title":"User"},{"location":"os/linux/packages/","text":"Packages Index Packages RPM APT bpytop RPM How to force installation without depedency. rpm -Uvh --nodeps $(repoquery --location centreon-plugins) APT bpytop How to isntall bpytop : apt install python3-pip pip3 install psutil pip3 install bpytop","title":"Packages"},{"location":"os/linux/packages/#packages","text":"","title":"Packages"},{"location":"os/linux/packages/#index","text":"Packages RPM APT bpytop","title":"Index"},{"location":"os/linux/packages/#rpm","text":"How to force installation without depedency. rpm -Uvh --nodeps $(repoquery --location centreon-plugins)","title":"RPM"},{"location":"os/linux/packages/#apt","text":"","title":"APT"},{"location":"os/linux/packages/#bpytop","text":"How to isntall bpytop : apt install python3-pip pip3 install psutil pip3 install bpytop","title":"bpytop"},{"location":"os/linux/regular-parsing/","text":"Regular parsing Grep 'outil \u00ab grep \u00bb, qui signifie \u00ab impression d\u2019expressions r\u00e9guli\u00e8res globales \u00bb, traite le texte ligne par ligne et imprime toutes les lignes correspondant au mod\u00e8le sp\u00e9cifi\u00e9. grep infos fichiers.txt grep -A $NUMBER_OF_LINE INFOS QU'ON CHERCHE -B $NUMBER_OF_LINE Sed TR Remove saut de ligne. sed '/^$/d' or sed '/^[[:space:]]*$/d' Dans vim : :%s /foo/newfoo/g Ajout d'\u00e9l\u00e8ment \u00e0 une ligne certaine. sed -i '20 a nouvel \u00e9l\u00e8ment' FICHIER Remove space. tr -d '[:blank:]' AWK Awk command : \"grp\" /word/ : awk '/data/ {gsub(\"\\\"\",\"\"); print $2}' \"gsub\" thing to remove: awk '{gsub(\"\\\"\",\"\"); print $2}' Find Trouver tout fichier depuis l\u2019endroit que vous souhaitez portant le nom de jacquet : find $DEPUIS_QUEL_ENDROIT -name jacquet Trouver dans le dossier httpd tout fichier plus vieux de 90 jours puis les supprimer : find /var/log/httpd/ -type f -name * -mtime +90 -exec rm -f {} \\; Note Le \u00ab {} \u00bb est le r\u00e9sultat de la recherche du find !","title":"Regular parsing"},{"location":"os/linux/regular-parsing/#regular-parsing","text":"","title":"Regular parsing"},{"location":"os/linux/regular-parsing/#grep","text":"'outil \u00ab grep \u00bb, qui signifie \u00ab impression d\u2019expressions r\u00e9guli\u00e8res globales \u00bb, traite le texte ligne par ligne et imprime toutes les lignes correspondant au mod\u00e8le sp\u00e9cifi\u00e9. grep infos fichiers.txt grep -A $NUMBER_OF_LINE INFOS QU'ON CHERCHE -B $NUMBER_OF_LINE","title":"Grep"},{"location":"os/linux/regular-parsing/#sed-tr","text":"Remove saut de ligne. sed '/^$/d' or sed '/^[[:space:]]*$/d' Dans vim : :%s /foo/newfoo/g Ajout d'\u00e9l\u00e8ment \u00e0 une ligne certaine. sed -i '20 a nouvel \u00e9l\u00e8ment' FICHIER Remove space. tr -d '[:blank:]'","title":"Sed &amp; TR"},{"location":"os/linux/regular-parsing/#awk","text":"Awk command : \"grp\" /word/ : awk '/data/ {gsub(\"\\\"\",\"\"); print $2}' \"gsub\" thing to remove: awk '{gsub(\"\\\"\",\"\"); print $2}'","title":"AWK"},{"location":"os/linux/regular-parsing/#find","text":"Trouver tout fichier depuis l\u2019endroit que vous souhaitez portant le nom de jacquet : find $DEPUIS_QUEL_ENDROIT -name jacquet Trouver dans le dossier httpd tout fichier plus vieux de 90 jours puis les supprimer : find /var/log/httpd/ -type f -name * -mtime +90 -exec rm -f {} \\; Note Le \u00ab {} \u00bb est le r\u00e9sultat de la recherche du find !","title":"Find"},{"location":"os/linux/system/","text":"SYSTEM Index SYSTEM Command Bash $VALUES Process CPU Processus Load Volumes LVM Compressed files DD Memory RAM Swap Service Systemctl Application lamp Postfix Automation Logrotate Network iP Adress DEB Screen Blank Screen Account Useradd Lock / Unlock Unlock Lock Time life password Sudoers Key PEM Key Time/Date Clock Command Bash $VALUES Contient le nom du script tel qu'il a \u00e9t\u00e9 invoqu\u00e9: $0 L'ensembles des param\u00e8tres sous la forme d'un seul argument: $* L'ensemble des arguments, un argument par param\u00e8tre: $@ Le nombre de param\u00e8tres pass\u00e9s au script: $# Le code retour de la derni\u00e8re commande:: $? Le PID su shell qui ex\u00e9cute le script: $$ Le PID du dernier processus lanc\u00e9 en arri\u00e8re-plan: $! Process CPU Lister le nombre de processeur : nproc Processus Comment utiliser ps ? Lister tout les processus : a : Ayant un terminal de contr\u00f4le u : Lanc\u00e9s par l'/es utilisateur(s) x : N'ayant pas de terminal de contr\u00f4le (TTY) e : Tout les processe d : Tout les processes sauf ceux de la session courante l : Liste longue f : Full - Avoir le nom complet du processus Load Check the load average fixed by the system: cat /proc/loadavg Verify time since the system is up: uptime You could check your system processes by top/htop or glances and more one else: top You can folow your CPU in real time by this command: vmstat -w 1 Volumes LVM L ogical V olume M anager Extend volumes. lvextend -L+ G /dev/mapper/VOLUME Apply modifications. resize2fs /dev/mapper/VOLUME Compressed files Compresser des fichiers : tar -czvf nom-de-l-archive.tar.gz /chemin/vers/r\u00e9pertoire-ou-fichier Voici le d\u00e9tail des options : - c : cr\u00e9e un archive. - z : compresse l\u2019archive avec gzip. - v : mode verbeux, affiche la progression. - f : permet de sp\u00e9cifier le nom du fichier d\u2019archive. Pour d\u00e9compresser le rar avec son passwd : rar x -hP{MOT DE PASSE} {FICHIER.RAR} rar x -hPTEST test2.rar DD dd n\u00e9cessite de droits super utilisateur : sudo dd bs=4M if=$chemin/fichier.iso of=/dev/$disk sync Memory RAM List detailes : ps axo rss, comm,pid,command | cat On OCI : sync echo 3 /proc/sys/vm/drop_caches Swap Desativation : swapoff -v /dev/mapper/volume Re-formater le volume swap : mkswap /dev/mapper/volume Activate logical volume ; swapon -va Service Systemctl How to list enabled unit-file. systemctl list-unit-files | grep enabled Application lamp Apache check config : /opt/lampp/bin/httpd -t Apache restart : /opt/lampp/bin/httpd -k restart Postfix Basic postfix configuration /etc/postfix/main.cf : relayhost = [smtp.gmail.com]:587 smtp_sasl_auth_enable = yes smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd smtp_sasl_security_options = noanonymous Automation Logrotate Check : logrotate -d /etc/logrotate.d/httpd Apply : logrotate -vf /etc/logrotate.d/httpd Network iP Adress Public iP : curl ifconfig.me curl ifconfig.co Private iP : hostname -i DEB File : /etc/network/interfaces : # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). # The loopback network interface auto lo iface lo inet loopback # The primary network interface auto eth0 iface eth0 inet static address 10.0.0.41 netmask 24 gateway 10.0.0.0 dns-nameservers 10.0.0.1 8.8.8.8 Screen Blank Screen Retirer la mise en veille lors de la fermeture du capot de l\u2019ordinateur portable. setterm-powersave off -blank 0 systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target Account Useradd How to adding user ? useradd -s /sbin/nologin -G $GRP useradd -m -G wheel -s /bin/bash $account Lock / Unlock Check password status : passwd -S $USER Status list : * LK: Password locked * NP: No password * PS: Password set Unlock Use the -u to unlock account passwd -u $USER Lock Use the -L to lock account passwd -L $USER Time life password Show the account password information chage -l $USER Set minimum day chage -m ${NOMBER OF DAY} ${USER} Sudoers Autorisation de l\u2019utilisateur max de supprimer dans le dossier. max ALL=NOPASSWD:/bin/rm -rf $CHEMIN_de_DOSSIER/* Autorisation pour l\u2019utilisateur matry_mc_fly de lire les fichiers dans le dossier. marty_mc_fly ALL=NOPASSWD:/usr/bin/cat /var/log/mariadb/* Key PEM Key Create pem key : Puttygen mykey.ppk -O private-openssh -o mykey.pem Time/Date Clock How to mod sys clock ? mv /etc/localtime /etc/localtime.backup ln -s /usr/share/zoneinfo/Europe/Paris /etc/localtime echo Europe/Paris | tee /etc/timezone timedatectl set-timezone Europe/Paris hwclock -s","title":"SYSTEM"},{"location":"os/linux/system/#system","text":"","title":"SYSTEM"},{"location":"os/linux/system/#index","text":"SYSTEM Command Bash $VALUES Process CPU Processus Load Volumes LVM Compressed files DD Memory RAM Swap Service Systemctl Application lamp Postfix Automation Logrotate Network iP Adress DEB Screen Blank Screen Account Useradd Lock / Unlock Unlock Lock Time life password Sudoers Key PEM Key Time/Date Clock","title":"Index"},{"location":"os/linux/system/#command","text":"","title":"Command"},{"location":"os/linux/system/#bash-values","text":"Contient le nom du script tel qu'il a \u00e9t\u00e9 invoqu\u00e9: $0 L'ensembles des param\u00e8tres sous la forme d'un seul argument: $* L'ensemble des arguments, un argument par param\u00e8tre: $@ Le nombre de param\u00e8tres pass\u00e9s au script: $# Le code retour de la derni\u00e8re commande:: $? Le PID su shell qui ex\u00e9cute le script: $$ Le PID du dernier processus lanc\u00e9 en arri\u00e8re-plan: $!","title":"Bash $VALUES"},{"location":"os/linux/system/#process","text":"","title":"Process"},{"location":"os/linux/system/#cpu","text":"Lister le nombre de processeur : nproc","title":"CPU"},{"location":"os/linux/system/#processus","text":"Comment utiliser ps ? Lister tout les processus : a : Ayant un terminal de contr\u00f4le u : Lanc\u00e9s par l'/es utilisateur(s) x : N'ayant pas de terminal de contr\u00f4le (TTY) e : Tout les processe d : Tout les processes sauf ceux de la session courante l : Liste longue f : Full - Avoir le nom complet du processus","title":"Processus"},{"location":"os/linux/system/#load","text":"Check the load average fixed by the system: cat /proc/loadavg Verify time since the system is up: uptime You could check your system processes by top/htop or glances and more one else: top You can folow your CPU in real time by this command: vmstat -w 1","title":"Load"},{"location":"os/linux/system/#volumes","text":"","title":"Volumes"},{"location":"os/linux/system/#lvm","text":"L ogical V olume M anager Extend volumes. lvextend -L+ G /dev/mapper/VOLUME Apply modifications. resize2fs /dev/mapper/VOLUME","title":"LVM"},{"location":"os/linux/system/#compressed-files","text":"Compresser des fichiers : tar -czvf nom-de-l-archive.tar.gz /chemin/vers/r\u00e9pertoire-ou-fichier Voici le d\u00e9tail des options : - c : cr\u00e9e un archive. - z : compresse l\u2019archive avec gzip. - v : mode verbeux, affiche la progression. - f : permet de sp\u00e9cifier le nom du fichier d\u2019archive. Pour d\u00e9compresser le rar avec son passwd : rar x -hP{MOT DE PASSE} {FICHIER.RAR} rar x -hPTEST test2.rar","title":"Compressed files"},{"location":"os/linux/system/#dd","text":"dd n\u00e9cessite de droits super utilisateur : sudo dd bs=4M if=$chemin/fichier.iso of=/dev/$disk sync","title":"DD"},{"location":"os/linux/system/#memory","text":"","title":"Memory"},{"location":"os/linux/system/#ram","text":"List detailes : ps axo rss, comm,pid,command | cat On OCI : sync echo 3 /proc/sys/vm/drop_caches","title":"RAM"},{"location":"os/linux/system/#swap","text":"Desativation : swapoff -v /dev/mapper/volume Re-formater le volume swap : mkswap /dev/mapper/volume Activate logical volume ; swapon -va","title":"Swap"},{"location":"os/linux/system/#service","text":"","title":"Service"},{"location":"os/linux/system/#systemctl","text":"How to list enabled unit-file. systemctl list-unit-files | grep enabled","title":"Systemctl"},{"location":"os/linux/system/#application","text":"","title":"Application"},{"location":"os/linux/system/#lamp","text":"Apache check config : /opt/lampp/bin/httpd -t Apache restart : /opt/lampp/bin/httpd -k restart","title":"lamp"},{"location":"os/linux/system/#postfix","text":"Basic postfix configuration /etc/postfix/main.cf : relayhost = [smtp.gmail.com]:587 smtp_sasl_auth_enable = yes smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd smtp_sasl_security_options = noanonymous","title":"Postfix"},{"location":"os/linux/system/#automation","text":"","title":"Automation"},{"location":"os/linux/system/#logrotate","text":"Check : logrotate -d /etc/logrotate.d/httpd Apply : logrotate -vf /etc/logrotate.d/httpd","title":"Logrotate"},{"location":"os/linux/system/#network","text":"","title":"Network"},{"location":"os/linux/system/#ip-adress","text":"Public iP : curl ifconfig.me curl ifconfig.co Private iP : hostname -i","title":"iP Adress"},{"location":"os/linux/system/#deb","text":"File : /etc/network/interfaces : # This file describes the network interfaces available on your system # and how to activate them. For more information, see interfaces(5). # The loopback network interface auto lo iface lo inet loopback # The primary network interface auto eth0 iface eth0 inet static address 10.0.0.41 netmask 24 gateway 10.0.0.0 dns-nameservers 10.0.0.1 8.8.8.8","title":"DEB"},{"location":"os/linux/system/#screen","text":"","title":"Screen"},{"location":"os/linux/system/#blank-screen","text":"Retirer la mise en veille lors de la fermeture du capot de l\u2019ordinateur portable. setterm-powersave off -blank 0 systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target","title":"Blank Screen"},{"location":"os/linux/system/#account","text":"","title":"Account"},{"location":"os/linux/system/#useradd","text":"How to adding user ? useradd -s /sbin/nologin -G $GRP useradd -m -G wheel -s /bin/bash $account","title":"Useradd"},{"location":"os/linux/system/#lock-unlock","text":"Check password status : passwd -S $USER Status list : * LK: Password locked * NP: No password * PS: Password set","title":"Lock / Unlock"},{"location":"os/linux/system/#unlock","text":"Use the -u to unlock account passwd -u $USER","title":"Unlock"},{"location":"os/linux/system/#lock","text":"Use the -L to lock account passwd -L $USER","title":"Lock"},{"location":"os/linux/system/#time-life-password","text":"Show the account password information chage -l $USER Set minimum day chage -m ${NOMBER OF DAY} ${USER}","title":"Time life password"},{"location":"os/linux/system/#sudoers","text":"Autorisation de l\u2019utilisateur max de supprimer dans le dossier. max ALL=NOPASSWD:/bin/rm -rf $CHEMIN_de_DOSSIER/* Autorisation pour l\u2019utilisateur matry_mc_fly de lire les fichiers dans le dossier. marty_mc_fly ALL=NOPASSWD:/usr/bin/cat /var/log/mariadb/*","title":"Sudoers"},{"location":"os/linux/system/#key","text":"","title":"Key"},{"location":"os/linux/system/#pem-key","text":"Create pem key : Puttygen mykey.ppk -O private-openssh -o mykey.pem","title":"PEM Key"},{"location":"os/linux/system/#timedate","text":"","title":"Time/Date"},{"location":"os/linux/system/#clock","text":"How to mod sys clock ? mv /etc/localtime /etc/localtime.backup ln -s /usr/share/zoneinfo/Europe/Paris /etc/localtime echo Europe/Paris | tee /etc/timezone timedatectl set-timezone Europe/Paris hwclock -s","title":"Clock"},{"location":"os/linux/vim/","text":"VIM Navigation VI Fl\u00eaches directionnelles : - j - descendre - k - monter - l - droite - h - droite VIM D\u00e9but ou fin de fichier : - Go to the top : gg - Go to the buttom : G - Descendre \u00e0 la ligne 34 : 34 G D\u00e9but ou fin de ligne : - Fin de la ligne o\u00f9 se trouve le dernier carract\u00e8re : $ - D\u00e9but de la ligne o\u00f9 se trouve le premier carract\u00e8re : 0 (shift+\u00e0) Supprimer les derni\u00e8res actions \"CRTL+Z\" : - Undo : u Keymap Liste : D\u00e9but du mot | si '/||.||--||...' alors utiliser B : b D\u00e9but du dexi\u00e8me mot en partant du mot d'origin : 3B Fin du mot suivant : e Mot suivant : w Replace : r Supprimer carract\u00e8re par carract\u00e8re : x Supprimer \u00e0 reculon carract\u00e8re par carract\u00e8re : x Changer (ce - changer jusqu'\u00e0 la fin du mot ) : c Enregister les modifications : ZZ Enregistrer les modifications et quiter le fichier : ZQ R\u00e9peter la derni\u00e8re actions effectu\u00e9e : . Sed Faire du sed : :%s /foo/newfoo/g Search Faire une recherche : - Du ahut vers le bas : / - Du bas vers le haut : ? - Mot sur lequel je suis : * Highlithing Retirer le surlignage : :noh","title":"VIM"},{"location":"os/linux/vim/#vim","text":"","title":"VIM"},{"location":"os/linux/vim/#navigation","text":"","title":"Navigation"},{"location":"os/linux/vim/#vi","text":"Fl\u00eaches directionnelles : - j - descendre - k - monter - l - droite - h - droite","title":"VI"},{"location":"os/linux/vim/#vim_1","text":"D\u00e9but ou fin de fichier : - Go to the top : gg - Go to the buttom : G - Descendre \u00e0 la ligne 34 : 34 G D\u00e9but ou fin de ligne : - Fin de la ligne o\u00f9 se trouve le dernier carract\u00e8re : $ - D\u00e9but de la ligne o\u00f9 se trouve le premier carract\u00e8re : 0 (shift+\u00e0) Supprimer les derni\u00e8res actions \"CRTL+Z\" : - Undo : u","title":"VIM"},{"location":"os/linux/vim/#keymap","text":"Liste : D\u00e9but du mot | si '/||.||--||...' alors utiliser B : b D\u00e9but du dexi\u00e8me mot en partant du mot d'origin : 3B Fin du mot suivant : e Mot suivant : w Replace : r Supprimer carract\u00e8re par carract\u00e8re : x Supprimer \u00e0 reculon carract\u00e8re par carract\u00e8re : x Changer (ce - changer jusqu'\u00e0 la fin du mot ) : c Enregister les modifications : ZZ Enregistrer les modifications et quiter le fichier : ZQ R\u00e9peter la derni\u00e8re actions effectu\u00e9e : .","title":"Keymap"},{"location":"os/linux/vim/#sed","text":"Faire du sed : :%s /foo/newfoo/g","title":"Sed"},{"location":"os/linux/vim/#search","text":"Faire une recherche : - Du ahut vers le bas : / - Du bas vers le haut : ? - Mot sur lequel je suis : *","title":"Search"},{"location":"os/linux/vim/#highlithing","text":"Retirer le surlignage : :noh","title":"Highlithing"},{"location":"os/windows/Windows/","text":"VINT D'EAU System Here are somes DOS tips tricks Systeminfo Trouver la date d\u2019installation Windows. systeminfo | find installation Se rendre rapidement sur la page de gestion des software: \u00c9x\u00e9cuter la commande suivante (dans invite de commande ou executer ou menu d\u00e9marr\u00e9) Appwiz.cpl Kill task How to force killing task? taskkill /F /IM OpenWith.exe /T Hosts file Hosts file configuration location : C:\\windows\\system32\\drivers\\etc\\ WSL How to enable Windows Subsystem for Linux? Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux How to change Drive icon ? Open regedit as administrator : - Go to Ordinateur\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\DriveIcons - Create a new key as the correspond lettre of your drive. - Create a new sub key as Defaulticon : Ordinateur\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\DriveIcons\\D\\Defaulticon Mod the chaine containned in Defaulticon key with the full path of your ico file. How to restore Windows 10 MBR La d\u00e9marche consiste \u00e0 remplacer le MBR qui permet d'amorcer GRUB en lui substituant un MBR pointant sur le lanceur de Windows. Le remplacement du MBR est r\u00e9alis\u00e9 \u00e0 partir du disque de restauration Windows ou du CD d'installation. Booter depuis le CD d'installation et choisir \"R\u00e9parer ou r\u00e9cup\u00e9rer une installation de Windows\". On s\u00e9lectionnera ensuite l'installation de Windows dans la liste des choix propos\u00e9s et on saisira le mot de passe administrateur. Au prompt, taper : C:\\WINDOWS fixboot C:\\WINDOWS fixmbr La surface disque utilis\u00e9e par Fedora n'est pas automatiquement r\u00e9-allou\u00e9e . C'est l'affaire de fdsik. La r\u00e9allocation consiste en un nouveau formatage, sous le format vfat ou ntfs ou autre, selon le choix - si l'on souhaite r\u00e9-allouer les partitions au profit de Windows. On pourra ainsi modifier le format de tout ou partie des partitions et notamment les fusionner. fdisk existe dans l'environnement Windows (ou un programme \u00e9quivalent). On red\u00e9marrera par la commande : C:\\WINDOWS exit Restauration Grub Si les partitions Linux n'ont pas \u00e9t\u00e9 r\u00e9-allou\u00e9es, il est toujours possible de restaurer GRUB (et ainsi le boot sur Fedora ou Windows). Chrome kiosk Ouvrir une page web avec Google Chrome dans une page d\u00e9tach\u00e9e: Chrome.exe --app=http://","title":"VINT D'EAU"},{"location":"os/windows/Windows/#vint-deau","text":"","title":"VINT D'EAU"},{"location":"os/windows/Windows/#system","text":"Here are somes DOS tips tricks","title":"System"},{"location":"os/windows/Windows/#systeminfo","text":"Trouver la date d\u2019installation Windows. systeminfo | find installation Se rendre rapidement sur la page de gestion des software: \u00c9x\u00e9cuter la commande suivante (dans invite de commande ou executer ou menu d\u00e9marr\u00e9) Appwiz.cpl","title":"Systeminfo"},{"location":"os/windows/Windows/#kill-task","text":"How to force killing task? taskkill /F /IM OpenWith.exe /T","title":"Kill task"},{"location":"os/windows/Windows/#hosts-file","text":"Hosts file configuration location : C:\\windows\\system32\\drivers\\etc\\","title":"Hosts file"},{"location":"os/windows/Windows/#wsl","text":"How to enable Windows Subsystem for Linux? Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux","title":"WSL"},{"location":"os/windows/Windows/#how-to-change-drive-icon","text":"Open regedit as administrator : - Go to Ordinateur\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\DriveIcons - Create a new key as the correspond lettre of your drive. - Create a new sub key as Defaulticon : Ordinateur\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Explorer\\DriveIcons\\D\\Defaulticon Mod the chaine containned in Defaulticon key with the full path of your ico file.","title":"How to change Drive icon ?"},{"location":"os/windows/Windows/#how-to-restore-windows-10-mbr","text":"La d\u00e9marche consiste \u00e0 remplacer le MBR qui permet d'amorcer GRUB en lui substituant un MBR pointant sur le lanceur de Windows. Le remplacement du MBR est r\u00e9alis\u00e9 \u00e0 partir du disque de restauration Windows ou du CD d'installation. Booter depuis le CD d'installation et choisir \"R\u00e9parer ou r\u00e9cup\u00e9rer une installation de Windows\". On s\u00e9lectionnera ensuite l'installation de Windows dans la liste des choix propos\u00e9s et on saisira le mot de passe administrateur. Au prompt, taper : C:\\WINDOWS fixboot C:\\WINDOWS fixmbr La surface disque utilis\u00e9e par Fedora n'est pas automatiquement r\u00e9-allou\u00e9e . C'est l'affaire de fdsik. La r\u00e9allocation consiste en un nouveau formatage, sous le format vfat ou ntfs ou autre, selon le choix - si l'on souhaite r\u00e9-allouer les partitions au profit de Windows. On pourra ainsi modifier le format de tout ou partie des partitions et notamment les fusionner. fdisk existe dans l'environnement Windows (ou un programme \u00e9quivalent). On red\u00e9marrera par la commande : C:\\WINDOWS exit Restauration Grub Si les partitions Linux n'ont pas \u00e9t\u00e9 r\u00e9-allou\u00e9es, il est toujours possible de restaurer GRUB (et ainsi le boot sur Fedora ou Windows).","title":"How to restore Windows 10 MBR"},{"location":"os/windows/Windows/#chrome","text":"","title":"Chrome"},{"location":"os/windows/Windows/#kiosk","text":"Ouvrir une page web avec Google Chrome dans une page d\u00e9tach\u00e9e: Chrome.exe --app=http://","title":"kiosk"}]}